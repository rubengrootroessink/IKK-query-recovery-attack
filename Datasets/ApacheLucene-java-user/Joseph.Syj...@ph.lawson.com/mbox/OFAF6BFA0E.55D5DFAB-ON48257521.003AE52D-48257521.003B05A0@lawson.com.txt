FROM: <Joseph.Syj...@ph.lawson.com>
SUBJECT: Re: Lucene in Action book. Problems with first example
DATE: 16 Dec 2008

Hi, 
What were the errors?
Just a guess ... it may be possible that you are using the wrong lucene 
version - the one in the book is not the most updated one avbl today


"XP is making a bet. It is betting that it is better to do a simple thing 
today and pay a little more tomorrow to change it if it needs it, than to 
do a more complicated thing today that may never be used anyway" - Extreme 
Programming Explained, Embrace Change

Best Regards, 

Joseph F. Syjuco 
Team Lead 
M3 Alpha - e-Commerce 
__________________________________ 
Lawson PSSC, Inc. 
4th Floor, One World Square Building 
Upper McKinley Road, Taguig City 1634 
Philippines 

Work: +63 (2) 976-3600 loc 79396
Mobile: +63 (917) 855-3436
Web: http://www.lawson.com 
Email: joseph.syjuco@lawson.com 


-------------------- Internet e-Mail Disclaimer --------------------
This e-mail and any files transmitted with it are confidential and 
intended solely for the use of the individual or entity to which they are 
addressed. If you are not the intended recipient you are notified that any 
use, disclosure, copying or distribution of the information is prohibited. 
In such case, you should destroy this message and kindly notify the sender 
by reply e-mail. The views expressed in this e-mail and any attachments 
are personal and, unless stated explicitly, do not represent the views of 
Lawson Software, Inc. 



"Oleg Oltar" <oltarasenko@gmail.com> 
12/16/2008 06:41 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Lucene in Action book. Problems with first example






Hi!
I am starting to learn Lucene.
I am using Lucene in Action book for startup (It was recommended to me). I
tried to compile first example from that book, but my ide (I use eclipse,
shows there are some errors in my code). I am just the beginner here, and 
I
really need to compile at least few programs.... before I can solve 
problems
myself. So I decided to post here the whole code with my comments. Please
help me!!!


package org.main;


import java.io.File;

import java.io.FileReader;

import java.io.IOException;

import java.util.Date;


import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.document.Document;

import org.apache.lucene.document.Field;

import org.apache.lucene.index.IndexWriter;




public class SimpleIndexer {

 /**

 * @param args

 */

public static void main(String[] args) throws Exception{

if (args.length !=2){

throw new Exception("Usage: java" + SimpleIndexer.class.getName() + 
"<indexDir>
<dataDir>");

}


 File indexDir = new File(args[0]);

File dataDir = new File(args[1]);

 long start = new Date().getTime();

int numIndexed = index(indexDir, dataDir);

long end = new Date().getTime();

System.out.println("Indexing " + numIndexed +" took " + (end - start) +
"milliseconds");

}


 @SuppressWarnings("deprecation")

public static int index(File indexDir, File dataDir) throws IOException {



 if (!dataDir.exists() || !dataDir.isDirectory()){

 throw new IOException(dataDir + " doesn't exist or not a directory");



 }

 IndexWriter writer = new IndexWriter(indexDir, new StandardAnalyzer(), 
true);
// Not sure why eclipse crosses this

 writer.setUseCompoundFile(false);



 indexDirectory(writer, dataDir);

 int numIndexed = writer.docCount(); // Not sure why eclipse crosses this

 writer.optimize();

 writer.close();





 return numIndexed;

}


 private static void indexDirectory(IndexWriter writer, File dir)
throwsIOException{

File[] files = dir.listFiles();

for (int i=0; i< files.length; i++){

File f = files[i];

if(f.isDirectory()){

indexDirectory(writer, f);

 } else if(f.getName().endsWith(".txt")){

indexFile(writer, f);

}

 }

}


 private static void indexFile(IndexWriter writer, File f) 
throwsIOException{

if(f.isHidden() || !f.exists() || !f.canRead()){

return;

}

System.out.println("Indexing " + f.getCanonicalPath());

 Document doc = new Document();

doc.add(Field.Text("contents", new FileReader(f))); // Eclipse says: The
method Text(String, FileReader) is undefined for the type Field

 doc.add(Field.Keyword("filename", f.getCanonicalPath())); // Eclipse 
says:The
method Keyword(String, String) is undefined for the type Field

writer.addDocument(doc);

 }





}

Please explain me why these errors are shown, and how to fix them. Maybe,
the version of lucene used by author of the book, contained needed 
methods?
So may it be that the book is outdated and can't be used for learning. If
so, please recommend me something that can help me to start with lucene.

Thanks in advance,
Oleg


