FROM: Koji Sekiguchi <k...@r.email.ne.jp>
SUBJECT: Re: FieldCache memory estimation - term values are interned?
DATE: 2 May 2010

Yonik Seeley wrote:
> On Sat, May 1, 2010 at 8:23 PM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
>   
>> Yonik Seeley wrote:
>>     
>>> Values are not interned, but in a single field cache entry (String[])
>>> the same String object is used for all docs with that same value.
>>>       
>> Yeah, you are right. Because I could see the arbitrary two Strings that have
>> same value were identical (== is true) in String[] gotten by getStrings()
>> but
>> I coudn't see explicit intern() for them, I asked. Can you elaborate who
>> done it?
>>     
>
> FieldCacheImpl:675 on trunk.
>
> For every term, a string value in constructed... then TermDocs (now
> DocsEnum in trunk) steps over every doc with that value and sets the
> same value.
>
>   
Uh, I looked that code but I didn't wise up.
Thank you very much for taking your time!

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


