FROM: Bill Janssen <jans...@parc.com>
SUBJECT: Re: lucene-core-2.2.0.jar broken? CorruptIndexException?
DATE: 29 Nov 2007

> > Another thing to try is turning on the infoStream
> > (IndexWriter.setInfoStream(...)) and capture & post the resulting log.
> > It will be very large since it takes quite a while for the error to
> > occur...
> 
> I can do that.

Here's what I see:

Optimizing...
merging segments _ram_a (1 docs) _ram_b (1 docs) _ram_c (1 docs) _ram_d (1 docs) _ram_e (1
docs) _ram_f (1 docs) _ram_g (1 docs) _ram_h (1 docs) _ram_i (1 docs) into _1va (9 docs)
org.apache.lucene.index.IndexFileDeleter@829e6f main: now checkpoint "segments_3ql" [isCommit
= true]
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v4.cfs": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v4_1.del": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v5.cfs": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v5_1.del": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v6.cfs": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v6_1.del": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v7.cfs": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v7_1.del": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v8.cfs": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v8_1.del": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v9.cfs": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1va.fnm": pre-incr count
is 0
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1va.fdx": pre-incr count
is 0
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1va.fdt": pre-incr count
is 0
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1va.tii": pre-incr count
is 0
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1va.tis": pre-incr count
is 0
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1va.frq": pre-incr count
is 0
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1va.prx": pre-incr count
is 0
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1va.nrm": pre-incr count
is 0
org.apache.lucene.index.IndexFileDeleter@829e6f main: deleteCommits: now remove commit "segments_3qk"
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v4.cfs": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v4_1.del": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v5.cfs": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v5_1.del": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v6.cfs": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v6_1.del": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v7.cfs": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v7_1.del": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v8.cfs": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v8_1.del": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v9.cfs": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "segments_3qk": pre-decr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "segments_3qk"
org.apache.lucene.index.IndexFileDeleter@829e6f main: now checkpoint "segments_3qm" [isCommit
= true]
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v4.cfs": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v4_1.del": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v5.cfs": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v5_1.del": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v6.cfs": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v6_1.del": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v7.cfs": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v7_1.del": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v8.cfs": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v8_1.del": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1v9.cfs": pre-incr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main:   IncRef "_1va.cfs": pre-incr count
is 0
org.apache.lucene.index.IndexFileDeleter@829e6f main: deleteCommits: now remove commit "segments_3ql"
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v4.cfs": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v4_1.del": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v5.cfs": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v5_1.del": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v6.cfs": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v6_1.del": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v7.cfs": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v7_1.del": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v8.cfs": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v8_1.del": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1v9.cfs": pre-decr count
is 2
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1va.fnm": pre-decr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1va.fnm"
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1va.fdx": pre-decr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1va.fdx"
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1va.fdt": pre-decr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1va.fdt"
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1va.tii": pre-decr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1va.tii"
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1va.tis": pre-decr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1va.tis"
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1va.frq": pre-decr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1va.frq"
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1va.prx": pre-decr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1va.prx"
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "_1va.nrm": pre-decr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1va.nrm"
org.apache.lucene.index.IndexFileDeleter@829e6f main:   DecRef "segments_3ql": pre-decr count
is 1
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "segments_3ql"
merging segments _1v4 (19680 docs) _1v5 (10 docs) _1v6 (9 docs) _1v7 (10 docs) _1v8 (9 docs)
_1v9 (10 docs) _1va (9 docs)org.apache.lucene.index.IndexFileDeleter@829e6f main: refresh:
removing newly created unreferenced file "_1vb.fdt"
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1vb.fdt"
org.apache.lucene.index.IndexFileDeleter@829e6f main: refresh: removing newly created unreferenced
file "_1vb.fdx"
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1vb.fdx"
org.apache.lucene.index.IndexFileDeleter@829e6f main: refresh: removing newly created unreferenced
file "_1vb.fnm"
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1vb.fnm"
org.apache.lucene.index.IndexFileDeleter@829e6f main: refresh: removing newly created unreferenced
file "_1vb.frq"
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1vb.frq"
org.apache.lucene.index.IndexFileDeleter@829e6f main: refresh: removing newly created unreferenced
file "_1vb.prx"
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1vb.prx"
org.apache.lucene.index.IndexFileDeleter@829e6f main: refresh: removing newly created unreferenced
file "_1vb.tii"
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1vb.tii"
org.apache.lucene.index.IndexFileDeleter@829e6f main: refresh: removing newly created unreferenced
file "_1vb.tis"
org.apache.lucene.index.IndexFileDeleter@829e6f main: delete "_1vb.tis"
java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 23754
	at org.apache.lucene.util.BitVector.get(BitVector.java:72)
	at org.apache.lucene.index.SegmentTermDocs.next(SegmentTermDocs.java:118)
	at org.apache.lucene.index.SegmentTermPositions.next(SegmentTermPositions.java:98)
	at org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:361)
	at org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:325)
	at org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:297)
	at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:261)
	at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:98)
	at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1883)
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1231)
	at com.parc.uplib.indexing.LuceneIndexing.update(LuceneIndexing.java:419)
	at com.parc.uplib.indexing.LuceneIndexing.main(LuceneIndexing.java:664)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


