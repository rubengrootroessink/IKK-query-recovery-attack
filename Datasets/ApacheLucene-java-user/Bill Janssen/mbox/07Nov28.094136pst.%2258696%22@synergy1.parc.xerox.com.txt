FROM: Bill Janssen <jans...@parc.com>
SUBJECT: lucene-core-2.2.0.jar broken?  CorruptIndexException?
DATE: 28 Nov 2007

I've got a DB of about 20000 pages which I thought I'd update to
Lucene 2.2.  I removed the old index (2.0 based) completely, and
started re-indexing all the documents.  I do this in stages, of about
50 pages at a time, serially, starting a new JVM each time, and reading
in the existing index, then adding to it, optimizing, and exiting.  I
know, really inefficient, and not my long-term plan.

Anyway, while I was doing this, I get the following exception in the
optimize step:

org.apache.lucene.index.CorruptIndexException: docs out of order (3760 <= 4083 )
	at org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:368)
	at org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:325)
	at org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:297)
	at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:261)
	at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:98)
	at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1883)
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1231)
	at com.parc.uplib.indexing.LuceneIndexing.update(LuceneIndexing.java:410)
	at com.parc.uplib.indexing.LuceneIndexing.main(LuceneIndexing.java:655)

This is OS X 10.4.11, PPC, Java 1.5, with 
"-Dorg.apache.lucene.writeLockTimeout=20000".

Do I need to go back to 2.0?

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


