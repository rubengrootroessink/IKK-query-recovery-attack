FROM: Ravi Rao <r...@alterpoint.com>
SUBJECT: RAM, FS Directory: Problem during merge
DATE: 16 Nov 2004

All,

Lucene 1.4 final.

I have an index that has to be updated frequently.  A search may
happen at any time.  I implemented this by indexing into a
RAMDirectory and then merging with an FSDirecotory at regular
intervals (or sometimes when a search is requested).  This seems to
work quite well.

On Linux, I have started seeing the following exception thrown.

java.io.IOException: read past EOF
  at
org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:220)
  at org.apache.lucene.store.InputStream.readBytes(InputStream.java:61)
  at org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:357)
  at org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:324)
  at
org.apache.lucene.index.SegmentMerger.mergeNorms(SegmentMerger.java:422)
  at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:94)
  at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:487)
  at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
  at
org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:381)

>>From reading the sources, the only way I can see this happening is if
the RAMDirectory is corrupted in some way.  Has anyone seen this
before?  I don't yet have access to the full logs so I don't have much
more information.

Many thanks,
-- 
Ravi/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


