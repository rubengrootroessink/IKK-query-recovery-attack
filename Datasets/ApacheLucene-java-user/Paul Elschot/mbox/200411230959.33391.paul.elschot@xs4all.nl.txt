FROM: Paul Elschot <paul.elsc...@xs4all.nl>
SUBJECT: Re: Numeric Range Restrictions: Queries vs Filters
DATE: 23 Nov 2004

Chris,

On Tuesday 23 November 2004 03:25, Hoss wrote:
> (NOTE: numbers in [] indicate Footnotes)
> 
> I'm rather new to Lucene (and this list), so if I'm grossly
> misunderstanding things, forgive me.
> 
> One of my main needs as I investigate Search technologies is to restrict
> results based on Ranges of numeric values.  Looking over the archives of
> this list, it seems that lots of people have run into problems dealing
> with this.  In particular, whenever someone asks a question about "Numeric
> Ranges" the question seem to always involve one (or more) of the
> following:
> 
>    (a) Lexical sorting puts 11 in the range "1 TO 5"
>    (b) Dates (or Dates and Times)
>    (c) BooleanQuery$TooManyClauses Exceptions
>    (d) Should I use a filter?

FWIW, the javadoc of the development version of
BooleanQuery.maxClauseCount reads:

  The maximum number of clauses permitted. Default value is 1024. Use the  
  org.apache.lucene.maxClauseCount system property to override. 

  TermQuery clauses are generated from for example prefix queries and
  fuzzy queries. Each TermQuery needs some buffer space during search,
  so this parameter indirectly controls the maximum buffer requirements for
  query search. Normally the buffers are allocated by the JVM. When using
  for example MMapDirectory the buffering is left to the operating system.

MMapDirectory uses memory mapped files for the index.

It would be useful to also provide a reference to filters (DateFilter)
and to LongField in case it is added to the code base.

...
> The Query API on the other hand ... I freely admit, that I can't make
> heads or tails out of it.  I don't even know where I would begin to try
> and write a new subclass of Query if I wanted to.

In a nutshell:

A Query either rewrites to another Query, or it provides a Weight.
A Weight first does normalisation and then provides a Scorer
to be used during search.

RangeQuery is a good example:

A RangeQuery rewrites to a BooleanQuery over TermQuery's
for the matching terms.
A BooleanQuery provides a BooleanScorer via its Weight.
A TermQuery provides a TermScorer via its Weight.

Regards,
Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


