FROM: Juan Felix <jafsn...@hotmail.com>
SUBJECT: solrj digest authentication
DATE: 8 Nov 2010


Hi.

I'm trying to use solrj to add documents in solr with use digest authentication but it displays
the following error:

org.apache.solr.client.solrj.SolrServerException: org.apache.commons.httpclient.
ProtocolException: Unbuffered entity enclosing request can not be repeated.
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(Commo
nsHttpSolrServer.java:469)
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(Commo
nsHttpSolrServer.java:243)
        at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(Ab
stractUpdateRequest.java:105)
        at org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:64)
        at org.apache.nutch.indexer.solr.TestSolr.main(TestSolr.java:18)
Caused by: org.apache.commons.httpclient.ProtocolException: Unbuffered entity en
closing request can not be repeated.
        at org.apache.commons.httpclient.methods.EntityEnclosingMethod.writeRequ
estBody(EntityEnclosingMethod.java:487)
        at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodB
ase.java:2114)
        at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.j
ava:1096)
        at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(Htt
pMethodDirector.java:398)
        at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMe
thodDirector.java:171)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.jav
a:397)
        at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.jav
a:323)
        at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(Commo
nsHttpSolrServer.java:416)
        ... 4 more

I already try the following but it didn't work: "httpclient.getParams().setAuthenticationPreemptive(true);"

If some body has a solution to this please let me know. Because if not I will need to use
PostMethod instead of that and I will need to translate the SolrInputDocuments to xml also.
This will be very intrusive for nutch.

Thanks
Juan
 		 	   		  
