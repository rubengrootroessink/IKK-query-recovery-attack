FROM: Siraj Haider <si...@jobdiva.com>
SUBJECT: Exception when running search
DATE: 17 Jun 2010

I am trying to run a search using search(query, filter, n, sort) method 
which return TopFieldDocs.  The sort is defined like: sort = new 
Sort(new SortField("DATEISSUED", SortField.LONG, true)); and I am 
passing filter as null.  The query I am passing is : +SK:1J +TEAMID:1 
which return results successfully when I run it thru Luke. I am getting 
the following exception when I run this code in tomcat (with sort).  
Does anyone have an idea about what I am doing wrong?

thanks
-siraj

java.lang.ArrayIndexOutOfBoundsException: 0
         at 
org.apache.lucene.search.FieldComparator$LongComparator.copy(FieldComparator.java:387)
         at 
org.apache.lucene.search.TopFieldCollector$OneComparatorNonScoringCollector.collect(TopFieldCollector.java:84)
         at 
org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:292)
         at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:248)
         at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:236)
         at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:179)
         at org.apache.lucene.search.Searcher.search(Searcher.java:90)
         at 
com.axelon.jobindex.JobIndex.runSearch_JobDiva(JobIndex.java:325)
         at JobSearchServlet.service(JobSearchServlet.java:73)
         at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
         at 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
         at 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
         at 
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
         at 
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
         at 
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
         at 
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
         at 
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
         at 
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
         at 
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)
         at 
org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)
         at 
org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
         at 
org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
         at 
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
         at java.lang.Thread.run(Thread.java:619)
java.lang.ArrayIndexOutOfBoundsException: 0
         at 
org.apache.lucene.search.FieldComparator$LongComparator.copy(FieldComparator.java:387)
         at 
org.apache.lucene.search.TopFieldCollector$OneComparatorNonScoringCollector.collect(TopFieldCollector.java:84)
         at 
org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:292)
         at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:248)
         at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:236)
         at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:179)
         at org.apache.lucene.search.Searcher.search(Searcher.java:90)
         at 
com.axelon.jobindex.JobIndex.runSearch_JobDiva(JobIndex.java:325)
         at JobSearchServlet.service(JobSearchServlet.java:73)
         at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
         at 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
         at 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
         at 
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
         at 
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
         at 
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
         at 
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
         at 
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
         at 
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
         at 
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)
         at 
org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)
         at 
org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
         at 
org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
         at 
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
         at java.lang.Thread.run(Thread.java:619)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


