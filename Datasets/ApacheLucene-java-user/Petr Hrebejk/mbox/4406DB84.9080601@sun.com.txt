FROM: Petr Hrebejk <Petr.Hreb...@Sun.COM>
SUBJECT: Storing byte arrays into an index
DATE: 2 Mar 2006

Hi,



I'm trying to use following call:

doc.add(new Field("contents", array, Field.Store.YES ) );

When array.length > 1024, then I get following exception:

[java]     at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:88)
      [java]     at 
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:284)
      [java]     at 
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:186)
      [java]     at 
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:88)
      [java]     at 
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:681)
      [java]     at 
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:658)
      [java]     at 
org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:646)
      [java]     at 
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:453)
      [java]     at 
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:436)
      [java]     at org.netbeans.luceneindexer.Indexer.indexDocs(Indexer.java:66)
      [java]     at org.netbeans.luceneindexer.Indexer.indexDocs(Indexer.java:60)
      [java]     at org.netbeans.luceneindexer.Indexer.indexDocs(Indexer.java:60)
      [java]     at org.netbeans.luceneindexer.Indexer.indexDocs(Indexer.java:60)
      [java]     at org.netbeans.luceneindexer.Indexer.indexDocs(Indexer.java:60)
      [java]     at org.netbeans.luceneindexer.Indexer.indexDocs(Indexer.java:60)
      [java]     at org.netbeans.luceneindexer.Indexer.indexDocs(Indexer.java:60)
      [java]     at org.netbeans.luceneindexer.Indexer.index(Indexer.java:34)
      [java]     at org.netbeans.luceneindexer.Main.main(Main.java:51)


Setting writer.setMaxMergeDocs( 5 ); makes the index creation pass. However 
attempts to read the index throws:

Exception in thread "main" java.lang.NullPointerException
         at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:88)
         at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:284)
         at org.netbeans.luceneindexer.Search.main(Search.java:107)


The program is basically the lucene demo changed to store content of a binary 
file without indexing it.

I'm not sure if I'm doing something wrong or if I should file a bug against lucene.

I'm using Lucene 1.9 final.

Thanks for reply
Hrebejk


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


