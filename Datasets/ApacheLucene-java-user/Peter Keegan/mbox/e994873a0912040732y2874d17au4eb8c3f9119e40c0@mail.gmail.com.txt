FROM: Peter Keegan <peterlkee...@gmail.com>
SUBJECT: searchWithFilter bug?
DATE: 4 Dec 2009

I'm having a problem with 'searchWithFilter' on Lucene 2.9.1. The Filter
wraps a simple BitSet. When doing a 'MatchAllDocs' query with this filter, I
get only a subset of the expected results, even accounting for deletes. The
index has 10 segments. In IndexSearcher->searchWithFilter, it looks like the
scorer is advancing to the filter's docId, which is the index-wide value,
but the scorer is using the segment-relative value. If I optimize the index,
I get the expected results.
Does this look like a bug?

Peter

