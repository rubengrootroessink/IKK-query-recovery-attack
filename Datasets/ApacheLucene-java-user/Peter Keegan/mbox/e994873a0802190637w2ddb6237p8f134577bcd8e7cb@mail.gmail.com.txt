FROM: "Peter Keegan" <peterlkee...@gmail.com>
SUBJECT: Re: FieldSortedHitQueue rise in memory
DATE: 19 Feb 2008

Hi Brian,

I ran into something similar a long time ago. My custom sort objects were
being cached by Lucene, but there were too many of them because each one had
different 'reference values' for different queries. So, I changed the equals
and hashcode methods to NOT use any instance data, thus avoiding the
caching.

Could this be what you're seeing?

Peter


On Feb 18, 2008 4:20 PM, Brian Doyle <brianpdoyle@gmail.com> wrote:

> We've implemented a custom sort class and use it to sort by distance.   We
> have implemented the equals and hashcode in the sort comparator.   After
> running for a few hours we're reaching peak memory usage and eventually
> the
> server runs out of memory.   We did some profiling and noticed that a
> large
> chunk of memory is being used in the
> lucence.search.FieldSortedHitQueueclass.   Has anyone seen this
> behavior before or know how we can stop this
> class from growing in size?
>

