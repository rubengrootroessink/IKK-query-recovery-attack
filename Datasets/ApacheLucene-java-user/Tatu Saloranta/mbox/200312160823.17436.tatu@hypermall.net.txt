FROM: Tatu Saloranta <t...@hypermall.net>
SUBJECT: Re: Lock obtain timed out
DATE: 16 Dec 2003

On Tuesday 16 December 2003 03:37, Hohwiller, Joerg wrote:
> Hi there,
>
> I have not yet got any response about my problem.
>
> While debugging into the depth of lucene (really hard to read deep insde) I
> discovered that it is possible to disable the Locks using a System
> property.
...
> Am I safe disabling the locking???
> Can anybody tell me where to get documentation about the Locking
> strategy (I still would like to know why I have that problem) ???
>
> Or does anybody know where to get an official example of how to
> handle concurrent index modification and searches?

One problem I have seen, and am still trying to solve, is that if my web app
is terminated (running from console during development, ctrl+c on unix),
sometimes it seems "commit.lock" file is left. Now problem is that apparently 
method that seems like it tries to check if there is a lock (and subsequently 
asking it to be removed via API) doesn't consider that to be "the" lock 
(sorry for not having details, writing this from home without source). So 
I'll probably see if disabling locks would get rid of this lock file (as I 
never have multiple writers, or even writer and reader, working on same 
index... I just always make full file copy of index before doing incremental 
updates), or physically delete commit.lock if necessary when starting the 
app.

The problem I describe above happens fairly infrequently, but that's actually 
what makes it worse... our QA people (in different continent) have been 
bitten by a bit couple of times. :-/

-+ Tatu +-


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


