FROM: "Matt Magoffin" <apache....@msqr.us>
SUBJECT: Re: "docs out of order exception" in Lucene. Please help.
DATE: 19 May 2005

In Re: to a post from 24-Mar-2005 by Matt Quail, in reference ... I'm
seeing this same exception (Windows, Lucene 1.4.3, Sun JDK 1.5.0_03) that
occurs repeatedly for me, but only during the course of running all my
application's unit tests in Ant. When I run the individual unit test I
can't get the error to occur. For me this is occuring via
IndexWriter.close(), however:

java.lang.IllegalStateException: docs out of order
 at
org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:353)
 at
org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:316)
 at
org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:290)
 at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:254)
 at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:93)
 at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:487)
 at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:440)
 at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:242)
 ...

Did anyone find a solution to this problem?

-- m@

On 24 Mar 2005 Matt Quail wrote:

I have also just seen this exception in a production system (lucene
1.4.3).

Any tips on what might be causing it? I'll be attempting to reproduce
it later, but I'm quite confident that while I'm using that
IndexWriter, no other readers are open, and no other Writers, either.

java.lang.IllegalStateException: docs out of order
 at org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:
353)
 at org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:
316)
 at org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:
290)
 at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:
254)
 at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:93)
 at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:487)
 at org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:
458)
 at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:310)
 at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:294)
 ...


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


