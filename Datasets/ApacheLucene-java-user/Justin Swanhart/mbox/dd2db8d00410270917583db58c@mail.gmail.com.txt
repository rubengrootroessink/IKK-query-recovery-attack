FROM: Justin Swanhart <greenl...@gmail.com>
SUBJECT: Re: Backup strategies
DATE: 27 Oct 2004

I would suggest that you create a lock file for your index writing
process, if the lock file is encountered close the IndexWriter until
the lock file is removed.  After you create the lockfile, wait a few
seconds to make sure the writer process has quiesced, then create a
snapshot of the filesystem.  Remove the lockfile and backup the
snapshot with your favorite backup tool (exclude the lock file), then
drop the snapshot.

Swany

On Wed, 27 Oct 2004 14:40:20 +0200, Christoph Kiehl <kiehl@subshell.com> wrote:
> Christiaan Fluit wrote:
> 
> > I have no practical experience with backing up an online index, but I
> > would try to find out the details of the write lock mechanism used by
> > Lucene at the file level. You can then create a backup component that
> > write-locks the index and does a regular file copy of the index dir.
> > During backup time searches can continue while updates will be
> > temporarily blocked.
> 
> The problem with this approach is that this will not only block write
> operations but you will get timeouts for these operations which will
> lead to exceptions. To prevent this you must implement some queuing,
> which is what I would like avoid.
> 
> Regards,
> Christoph
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


