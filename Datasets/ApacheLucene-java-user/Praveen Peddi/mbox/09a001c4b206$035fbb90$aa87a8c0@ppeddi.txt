FROM: "Praveen Peddi" <ppe...@contextmedia.com>
SUBJECT: Using Shared directory as lucene index in cluster
DATE: 14 Oct 2004

Hi all,
This topic has been discussed in the mailing list before but I could not find an answer to
the problem I am having.

I am trying to decide whether shared directory based index is better way or local index per
server is a better way in a clustered application. First I am evaluating the shared direcotry
option. I am trying to use shared directory (NFS) and test the performance difference compared
to local directory. I didn't see much difference on the search side but indexing I think is
little slower in shared directory. I think we can live with this. But, I could not make indexing
run in cluster mode. We cache IndexSearcher on each server in the cluster (for faster search).
We make sure that the cached index search is always up to date. 

When I run our full indexer, it cleans the index directory and re indexes all the objects
from DB to lucene index directory. But it looks like indexsearcher holds the file handles
so I cannot delete the directory. This means I cannot run the full indexer in cluster mode
since each server holds file handle on some of the index files and those files cannot be deleted.


One solution is to make sure searchers on all servers are closed before running full indexer.
But there is no direct way to notify this in cluster. So my question is, Is there any other
solution that doesn't need to close searcher to clean the index files?

Note: This is in fact not related to shared directory but true for local directory also.

Praveen



************************************************************** 
Praveen Peddi
Sr Software Engg, Context Media, Inc. 
email:ppeddi@contextmedia.com 
Tel:  401.854.3475 
Fax:  401.861.3596 
web: http://www.contextmedia.com 
************************************************************** 
Context Media- "The Leader in Enterprise Content Integration" 

