FROM: bart_212 <wojtekg...@gmail.com>
SUBJECT: Re: reopen with optimize and FileNotFoundException
DATE: 10 Mar 2011

I've tried different lucene locks to use, however I always get FNFE during
huge index update while IR reopens index. To prevent two IW at the same
time, I synchronize this operation using external locking mechanism based on
atomic filesystem operation like creating directory. So just before indexing
I lock manually ,then I create IW ,do indexing, then release the lock. It
works fine, I have always only one IW during indexing. So in my case lucene
locks are irrelevant unless IR during searching needs to lock?

I've noticed that I get this exception only once, then it is caught inside
and some segment seems to be just omitted. I haven't checked if index is
healthy, however other reopens seems to succeed. BTW, it occurs when one app
is indexing and the second is searching.
Please clarify, what component (IR or IW) is responsible for creating
"*.tis" file? Sometimes it is also some "*.frq" file...
I suspected that it can be caused of merging segments by IW, however you
claim it should be fine...
What do you think?

--
View this message in context: http://lucene.472066.n3.nabble.com/reopen-with-optimize-and-FileNotFoundException-tp2655555p2662149.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


