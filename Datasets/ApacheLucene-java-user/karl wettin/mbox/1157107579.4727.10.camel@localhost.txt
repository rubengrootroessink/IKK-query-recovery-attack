FROM: karl wettin <karl.wet...@gmail.com>
SUBJECT: Re: Lock error attempting update of RAMDirectory index
DATE: 1 Sep 2006

On Thu, 2006-08-31 at 19:34 -0700, Philip Brown wrote:
karl wettin-3 wrote:
> > 
> > On Thu, 2006-08-31 at 15:24 -0700, Philip Brown wrote:
> >> 
> >> I'm getting the following error trying to instantiate an IndexModifier
> >> on a RAMDirectory index:
> >> 
> >> java.io.IOException: Lock obtain timed out:
> >> org.apache.lucene.store.RAMDirectory$1@a336b7 
> > 
> > You probably forgot to close an IndexWriter?
> 
> Well, I wish it were that easy...I open one IndexWriter to write the
> documents to the index after it is created, and then call writer.optimize()
> and writer.close().  Your suggestion is a good one in that, from what I've
> read, the writer needs to be closed to release the lock file.  Apparently,
> there is more to it than that.  Also, this doesn't happen consistently --
> just occasionally.

Set a breakpoint, print the stacktrace of a new instance of Exception to
your log, or do something similar in the lock methods of Lucene so you
will find out what code of yours lock and unlocks the index. 

I'm quite convinced you forget to close something. Or perhaps you try to
modify at the same time as you insert documents.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


