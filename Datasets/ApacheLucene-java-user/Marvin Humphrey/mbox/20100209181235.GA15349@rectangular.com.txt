FROM: Marvin Humphrey <mar...@rectangular.com>
SUBJECT: Re: Flex & Docs/AndPositionsEnum
DATE: 9 Feb 2010

On Tue, Feb 09, 2010 at 11:51:31AM -0500, Michael McCandless wrote:

> You should (when possible/reasonable) instead use
> ReaderUtil.gatherSubReaders, then iterate through those sub readers
> asking each for its flex fields.
> 
> But if this is only for testing purposes, and Multi*Enum is more
> convenient (and, once attrs work correctly), then Multi*Enum is
> perfectly fine.

Mike, FWIW, I've removed the ability to iterate over posting data at anything
other than the segment level from KS.  There's still a priority-queue-based
aggregator for iterating over all terms in a multi-segment index, but not for
anything lower.  

Forcing pluggable index formats to support the extra level of indirection
necessary for iterating postings from a high level both introduces
inefficiency and constrains their development.  Consider what would happen if
we tried indexed terms within a flat positions space and returned an array of
positions instead of one position at a time.  The instant you return objects
or aggregates rather than primitives, you force support for offsets down into
the low-level decoder.

It's not really necessary to iterate aggregated postings across multiple
segments, so IMO it's best to shunt users like Renaud towards the segment
level.

Marvin Humphrey


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


