FROM: Bernhard Messer <Bernhard.Mes...@intrafind.de>
SUBJECT: Re: speeding up queries (MySQL faster)
DATE: 21 Aug 2004

Yonik,

there is another "synchronized" block in CSInputStream which could block 
your second cpu out. Do you think there is a chance to recreate the 
index (maybe a smaller subset) without compound file option enabled and 
run your test again, so that we can see if this helps ?

regards
Bernhard

Otis Gospodnetic wrote:

>Ah, you may be right (no stack trace in email any more).  Somebody
>recenly identified a few bottlenecks that, if I recall correctly, were
>related to synchronized blocks.  I believe Doug committed some
>improvements, but I can't remember which version of Lucene that is in. 
>It's definitely in 1.4.1.
>
>Otis
>
>
>--- Yonik Seeley <yseeley@yahoo.com> wrote:
>
>  
>
>>--- Otis Gospodnetic <otis_gospodnetic@yahoo.com>
>>wrote:
>>
>>    
>>
>>>The bottleneck seems to be disk IO.
>>>      
>>>
>>But it's not.  Linux is caching the whole file, and
>>there really isn't any disk activity at all.  Most of
>>the threads are blocked on InputStream.refill, not
>>waiting for the disk, but waiting for their turn into
>>the synchronized block to read from the disk (which is
>>why I asked about cacheing above that level).
>>
>>CPU is a constant 50% on a dual CPU system (meaning
>>100% of 1 cpu).
>>
>>-Yonik
>>
>>__________________________________________________
>>Do You Yahoo!?
>>Tired of spam?  Yahoo! Mail has the best spam protection around 
>>http://mail.yahoo.com 
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


