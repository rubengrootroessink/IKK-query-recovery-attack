FROM: "Uwe Schindler" <...@thetaphi.de>
SUBJECT: RE: NIOFSDirectory AssertionError in sun.nio.ch.NativeThreadSet
DATE: 7 Dec 2009

Maybe you should update your JVM?

1.5.0_08 is really old, the latest 1.5 version is _22. This looks like a Sun
Bug, because the AssertionException happens in Sun's code not in Lucene's.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: dcliman@gmail.com [mailto:dcliman@gmail.com] On Behalf Of Dan
> Sent: Sunday, December 06, 2009 9:30 PM
> To: java-user@lucene.apache.org
> Subject: NIOFSDirectory AssertionError in sun.nio.ch.NativeThreadSet
> 
> I've been running some tests with Lucene 2.9.1 on a Linux box with a
> Sun JVM and getting a sun.nio.ch.NateiveThreadSet Assertion error (see
> below for stacktrace).
> 
> Does anyone know what this error means? Any suggestions for a workaround?
> 
> We used the following to open the index.
> 	FSDirectory dir = FSDirectory.open(new
> File("path_to_lucene_index"));
>         IndexReader sReader = IndexReader.open(dir, true);  // open a
> read-only reader
> 
> 
> 
> java version "1.5.0_08"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_08-b03)
> Java HotSpot(TM) Server VM (build 1.5.0_08-b03, mixed mode)
> 
> 
> java.lang.AssertionError
>         at sun.nio.ch.NativeThreadSet.add(NativeThreadSet.java:46)
>         at sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:623)
>         at
> org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.readInternal(NIOFSD
> irectory.java:161)
>         at
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.ja
> va:136)
>         at
> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(Compo
> undFileReader.java:247)
>         at
> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:
> 157)
>         at
> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.jav
> a:38)
>         at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:80)
>         at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:64)
>         at
> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:129)
>         at
> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:160)
>         at
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:232)
>         at
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:179)
>         at
> org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:975)
>         at
> org.apache.lucene.index.DirectoryReader.docFreq(DirectoryReader.java:627)
>         at
> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:147)
>         at
> org.apache.lucene.search.Similarity.idfExplain(Similarity.java:765)
>         at
> org.apache.lucene.search.TermQuery$TermWeight.&lt;init&gt;(TermQuery.java:
> 46)
>         at
> org.apache.lucene.search.TermQuery.createWeight(TermQuery.java:146)
>         at
> org.apache.lucene.search.BooleanQuery$BooleanWeight.&lt;init&gt;(BooleanQu
> ery.java:184)
>         at
> org.apache.lucene.search.BooleanQuery.createWeight(BooleanQuery.java:415)
>         at org.apache.lucene.search.Query.weight(Query.java:99)
>         at
> org.apache.lucene.search.Searcher.createWeight(Searcher.java:230)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:171)
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


