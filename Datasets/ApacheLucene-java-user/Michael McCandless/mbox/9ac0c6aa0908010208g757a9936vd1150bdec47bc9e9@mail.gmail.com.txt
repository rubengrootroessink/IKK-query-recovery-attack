FROM: Michael McCandless <luc...@mikemccandless.com>
SUBJECT: Re: ThreadedIndexWriter vs. IndexWriter
DATE: 1 Aug 2009

(Please note that ThreadedIndexWriter is source code available with
the upcoming revision to Lucene in Action.)

Phil, is it possible you are using an older version of the book's
source code?  In particular, can you check whether your version of
ThreadedIndexWriter.java has this:

  public void close(boolean doWait) throws CorruptIndexException, IOException {
    finish();
    super.close(doWait);
  }

(I vaguely remember that being missing from earlier releases, which
could explain what you're seeing).  If you are missing that, can you
download the current code from http://www.manning.com/hatcher3 and try
again?

If that's not the problem... can you post the benchmark alg you are
using in each case?

Mike

On Fri, Jul 31, 2009 at 8:26 PM, Jibo John<jibojohn@mac.com> wrote:
> Hi Phil,
>
> It's 5 threads for IndexWriter.
>
> For ThreadedIndexWriter, I used:
>
> writer.num.threads=16
> writer.max.thread.queue.size=80
>
> Thanks,
> -Jibo
>
> On Jul 31, 2009, at 5:01 PM, Phil Whelan wrote:
>
>> Hi Jibo,
>>
>> Your mergeFactor is different, and the resulting numFiles (segment
>> files) is different. Maybe each thread is responsible for a segment
>> file. Just curious - do you have 3 threads?
>>
>> Phil
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


