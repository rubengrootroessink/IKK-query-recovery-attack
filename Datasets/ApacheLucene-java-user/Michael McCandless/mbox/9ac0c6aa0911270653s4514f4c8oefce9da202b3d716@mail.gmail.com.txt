FROM: Michael McCandless <luc...@mikemccandless.com>
SUBJECT: Re: MergePolicy$MergeException CorruptIndexException in lucene2.4.1
DATE: 27 Nov 2009

On Fri, Nov 27, 2009 at 6:23 AM, jm <jmuguruza@gmail.com> wrote:
> Ok, I got the index from the production machine, but I am having some
> problem to find the index..., our process deals with multiple indexes,
> in the current exception I cannot see any indication about the index
> having the issue. Â I opened all my indexes with luke and old opened
> succesfully, some had around 4000 docs (so I can discard those I
> think), and some had around 40.000 docs, I was hoping one that had
> around 24658 docs, but I guess this is the number of docs in one
> segment, not the whole index right?

Right, it's the one segment.

> Any idea to help find the index?

Looks like you tracked it down... you could also have written a one
off tool that uses CheckIndex's programmatic API to step through all
your indexes.

> In the codebase it would be nice to give any hint about the index
> (path in case of a fsdirectory etc) when found an exception, dont
> assume there is a single index in the application.

I agree that'd be nice... we should probably fix CorruptIndexException
to accept a Directory, which it then toString's and includes in the
message.  Anyone out there wanna cough up a patch...?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


