FROM: Michael McCandless <luc...@mikemccandless.com>
SUBJECT: Re: IndexWriter.close() performance issue
DATE: 3 Nov 2010

On Wed, Nov 3, 2010 at 4:27 PM, Mark Kristensson
<mark.kristensson@smartsheet.com> wrote:
>
> I've run checkIndex against the index and the results are below. That net is that it's
telling me nothing is wrong with the index.

Thanks.

> I did not have any instrumentation around the opening of the IndexSearcher (we don't
use an IndexReader), just around the actual query execution so I had to add some additional
logging. What I found surprised me, opening a search against this index takes the same 6 to
8 seconds that closing the indexWriter takes.

IndexWriter opens a SegmentReader for each segment in the index, to
apply deletions, so I think this is the source of the slowness.

>From the CheckIndex output, it looks like you have many (296,713)
unique fields names on that one large segment -- does that sound
right?  I suspect such a very high field count is the source of the
slowness...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


