FROM: Michael McCandless <luc...@mikemccandless.com>
SUBJECT: Re: Deleted File Handles - Index Writer
DATE: 18 Nov 2010

On Thu, Nov 18, 2010 at 10:10 AM, Thomas Rewig <trewig@mufin.com> wrote:
> Â Hi Michael,
>
> Thanks for your answer and sorry for my late reply.
>>
>> Are you using compound file format (the default)?
>>
> Yes I am using the compound file format as default.
>>
>> If you turn that off (just for this test) do you still see that
>> IndexWriter is holding open the files (35 in your example) after you
>> close all readers?
>
> If I set
> writer.setUseCompoundFile(false);
> than I see a short time the 35 handles and than it drops to zero.

Hmm what's happening during that short time?  Do you have a reader open?

> If I do not use the compound file format as my new default until the new
> version with the fix is available, what would be the disadvantages?

The big issue with CFS turned off is you risk running out of file
descriptors if you have too many segments in your index.  The exact
limit is very OS dependent though, so if you're on an OS that's
generous, and mergeFactor stays low, then you should be fine.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


