FROM: Michael McCandless <luc...@mikemccandless.com>
SUBJECT: Re: OutOfMemoryError using IndexWriter
DATE: 24 Jun 2009

On Wed, Jun 24, 2009 at 10:18 AM, stefan<stefan@intermediate.de> wrote:
>
> Hi,
>
>
>>OK so this means it's not a leak, and instead it's just that stuff is
>>consuming more RAM than expected.
> Or that my test db is smaller than the production db which is indeed the case.

But a "leak" would keep leaking over time, right?  Ie even a 1 GB heap
on your test db should eventually throw OOME if there's really a leak.

> Please explain those buffered deletes in a few more details.

Are you calling updateDocument (which deletes then adds)?

Deletes (the Term or Query you pass to updateDocument or
deleteDocuments) are buffered in a HashMap and then that buffer is
materialized into actual deleted doc IDs when IndexWriter decides to
do so.  I think IndexWriter isn't properly flushing the deletes when
they use too much RAM.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


