FROM: Michael McCandless <luc...@mikemccandless.com>
SUBJECT: Re: index corruption with latest lucene
DATE: 6 May 2008


Could you provide more detail on how you hit these two exceptions?   
Are they reproducible from scratch (creating a new index)?

Are you using multiple threads against IndexWriter?  Is autoCommit  
true or false?  Any prior exceptions hit?  Do your documents have  
varying number/configuration of fields?  Is the index copied  
somewhere after being written?

Can you run with assertions enabled to see if something is tripped?

Maybe run CheckIndex on the index?

Mike

crspan wrote:
> coincidence or it is from 2.3.2 ?
>
> env:
> lucene 2.3.2
> jdk1.6.0_06 & jdk1.5.0_15
>
>
> QueryString:
> illeg^30.820824 technolog^22.290413 transfer^33.307804
> Error: java.lang.ArrayIndexOutOfBoundsException:  
> 132704java.lang.ArrayIndexOutOfBoundsException: 132704
> at org.apache.lucene.search.BooleanScorer2$Coordinator.coordFactor 
> (BooleanScorer2.java:55)
> at org.apache.lucene.search.BooleanScorer2.score 
> (BooleanScorer2.java:358)
> at org.apache.lucene.search.BooleanScorer2.score 
> (BooleanScorer2.java:320)
> at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
> 146)
> at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
> 113)
> at org.apache.lucene.search.Searcher.search(Searcher.java:132)
> at org.cr.search.TrecQueryRelevanceFeedback.main 
> (TrecQueryRelevanceFeedback.java:776)
>
>
> QueryString:
> oceanograph^68.48028 vessel^43.191563
> Error:  
> java.lang.ArrayIndexOutOfBoundsExceptionjava.lang.ArrayIndexOutOfBound 
> sException
> at java.lang.System.arraycopy(Native Method)
> at org.apache.lucene.index.TermVectorsReader.readTermVector 
> (TermVectorsReader.java:353)
> at org.apache.lucene.index.TermVectorsReader.readTermVectors 
> (TermVectorsReader.java:287)
> at org.apache.lucene.index.TermVectorsReader.get 
> (TermVectorsReader.java:232)
> at org.apache.lucene.index.SegmentReader.getTermFreqVectors 
> (SegmentReader.java:981)
> at org.cr.rf.RelevanceFeedback.RelFeedbackWeight 
> (RelevanceFeedback.java:134)
> at org.cr.search.TrecQueryRelevanceFeedback.main 
> (TrecQueryRelevanceFeedback.java:781)
>
>
>
>
> Mark Miller wrote:
>> Any recent changes that would expose index corruption?
>>
>> I am getting two new errors when trying to search:
>>
>> nullpointer fieldsreaders line 260
>>
>> indexoutofbounds on fieldinfo line 185
>>
>> I am kind of screwed, because reindexing fixes this, but I cant  
>> reindex!
>>
>> Any ideas?
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


