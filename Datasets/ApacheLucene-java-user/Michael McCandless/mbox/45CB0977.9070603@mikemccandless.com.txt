FROM: Michael McCandless <luc...@mikemccandless.com>
SUBJECT: Re: exception is hit while optimizing index
DATE: 8 Feb 2007

maureen tanuwidjaja wrote:

>   I would like to know about optimizing index...
>   
>   The exception is hit due to disk full while optimizing the index and hence,the index
has not been closed yet.
>   
>   Is the unclosed index dangerous?Can i perform searching in such index correctly?Is
the index built robust yet?

The index is fine in this case: it will not become corrupt.

The only known case where Lucene can corrupt an index on disk full is
in the addIndexes(*) methods of IndexWriter (see
http://issues.apache.org/jira/browse/LUCENE-702 for details).  This
corruption case has been fixed on the Lucene trunk (to be released as
2.1 soon).

However: you will have leftover (possibly very large) files in your
index directory that are not used, yet Lucene will never delete them.
Sometimes these files have the suffix ".tmp" but that is not always
the case.

This has also been fixed in the trunk version of Lucene, meaning on
any Exception during optimize, addDocument, etc., Lucene will remove
any partial files it had created.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


