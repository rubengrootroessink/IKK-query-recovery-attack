FROM: "Michael McCandless" <luc...@mikemccandless.com>
SUBJECT: Re: Lock obtain timed exception
DATE: 24 May 2007


"Laxmilal Menaria" <lmenaria@chambal.com> wrote:

> > I am getting Lock obtain timed exception while Searching in Index.
> >
> > My Steps: I have created a Lucene Index at first week of may 2007, after
> > that I have nothing changed in index folder. Just I am searching. Searcher
> > code have only MultiSearcher. BUT now I am getting "Lock obtain timed out
> > exception", I saw in temp folder there was one lock file exists "
> > lucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock<exists@MinalyzerLite.MDS%5Clucene-22e0ad3c019e26a6e2991b0e6ed97e1c-commit.lock>
> > "
> >
> > Is MultiSearcher created lock file? or any other issue ?
> >
> > Please suggest me..
> >
> > I am using Lucene 2.0.

Indeed, searchers do create the "commit" lock, but normally the commit
lock lifetime is very brief.  Most likely this leftover lock file
means that the JVM crashed or maybe there was an exception while a
searcher was initializing itself.  Is there any evidence that one of
these happened?

You should just remove that lock file an re-run things.  If it keeps
getting stuck then it would be good to get to the root cause.

Note that as of 2.1, Lucene no longer uses a commit lock at all.  This
makes searchers entirely read-only and prevents your issue from
occurring.  The write lock (created by IndexWriter) still remains but
is now stored by default in the index dir instead of the system's temp
dir.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


