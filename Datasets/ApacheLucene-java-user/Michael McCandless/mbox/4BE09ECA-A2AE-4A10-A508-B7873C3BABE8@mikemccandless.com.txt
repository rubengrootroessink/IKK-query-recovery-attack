FROM: Michael McCandless <luc...@mikemccandless.com>
SUBJECT: Re: Document ID shuffling under 2.3.x (on merge?)
DATE: 11 Mar 2008


Hi Daniel,

2.3 should be no different from 2.2 in that docIDs only "shift" when  
a merge of segments with deletions completes.

Could it be the ConcurrentMergeScheduler?  Merges now run in the  
background by default and commit whenever they complete.  You can get  
back to the previous (blocking) behavior by using  
SerialMergeScheduler instead.

If it's not that ... can you provide more details about how your  
applications is relying on docIDs?

Mike

Daniel Noll wrote:

> Hi all.
>
> We're using the document ID to associate extra information stored  
> outside
> Lucene.  Some of this information is being stored at load-time and  
> some
> afterwards; later on it turns out the information stored at load- 
> time is
> returning the wrong results when converting the database contents  
> back into a
> BitSet for filtering.
>
> Using version 2.2.x doesn't appear to cause the problem, so I have  
> been
> wondering if something happened in 2.3.x to change the document  
> IDs.  Having
> already looked to try and determine this myself, it doesn't appear  
> to be
> reordering them in DocumentsWriter, but perhaps there is some subtle
> side-effect of the way segments are merged which has caused this?
>
> Daniel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


