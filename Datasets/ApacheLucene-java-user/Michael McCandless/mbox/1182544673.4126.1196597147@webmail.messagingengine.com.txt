FROM: "Michael McCandless" <luc...@mikemccandless.com>
SUBJECT: Re: nfs mount problem
DATE: 22 Jun 2007


Actually this issue should be closed.  I will close it.

As far as I know, Lucene should now work over NFS, except you will
have to make a custom deletion policy that works for your application.

Lucene had issues with NFS in three areas: locking, stale client-side
file caches and how NFS handles deletion of open files.  The first two
were fixed in Lucene 2.1 with lock-less commits (LUCENE-701) and the
last one is fixed in 2.2 with the addition of "custom deletion
policies" (LUCENE-710).

For a custom deletion policy you need to implement the
org.apache.lucene.index.IndexDeletionPolicy interface in your own
class and pass an instance of that class to your IndexWriter.  This
class tells IndexWriter when it's safe to delete older commits.  By
default Lucene uses an instance of KeepOnlyLastCommitDeletionPolicy.

The basic idea is to implement logic that can tell when your readers
are done using an older commit in the index.  For example if you know
your readers refresh themselves once per hour then your deletion
policy can safely delete any commit older than 1 hour.

But please note that while I believe NFS will now work fine, this has
not been heavily tested yet.  Also note that performance over NFS is
generally not great.  If you do go down this route please report back
on any success or failure!  Thanks.

Mike

"Beard, Brian" <Brian.Beard@mybir.com> wrote:
> 
> http://issues.apache.org/jira/browse/LUCENE-673
> 
> 
> This says the NFS mount problem is still open, is this the case?
> 
> Has anyone been able to deal with this adequately?
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


