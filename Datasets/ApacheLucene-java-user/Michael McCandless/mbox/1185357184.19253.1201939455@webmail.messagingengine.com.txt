FROM: "Michael McCandless" <luc...@mikemccandless.com>
SUBJECT: Re: Recovering from a Crash
DATE: 25 Jul 2007

> > The data appears to be there - please tell me that I'm doing something
> > stupid and I can recover from this.
>
> It appears by deleting the write.lock files everything has recovered.

Hmmm -- it's odd that the existence of the write.lock caused you to
lose most of your index.  All that should have happened here is on
creating a new writer it would throw a LockObtainTimedOut exception
saying it could not obtain the write lock.  I don't see how this would
cause most of your index to be deleted...

> Is this best practice? Have I just done something so terribly wrong
> that I've bought about the end of the universe?

Universe seems intact on my end :)  But yes deleting the write.lock is
the right thing to do in this case.  You can also switch to native
locking (NativeFSLockFactory) and then the OS would free the lock
so you would not have to delete the write.lock manually...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


