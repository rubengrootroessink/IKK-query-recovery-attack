FROM: Grant Ingersoll <gsing...@apache.org>
SUBJECT: Re: BoostingTermQuery.explain() bugs
DATE: 30 Aug 2007


On Aug 30, 2007, at 3:40 PM, Peter Keegan wrote:

> There are a couple of minor bugs in BoostingTermQuery.explain().
>
> 1. The computation of average payload score produces NaN if no  
> payloads were
> found. It should probably be:
> float avgPayloadScore = super.score() * (payloadsSeen > 0 ?  
> (payloadScore /
> payloadsSeen) : 1);
>
> 2. If the average payload score is zero, the value of the  
> explanation is 0:
> result.setValue(nonPayloadExpl.getValue() * avgPayloadScore);
> If the query is part of a BooleanClause, this results in:
> "no match on required clause..."
> "failure to meet condition(s) of required/prohibited clause(s)"
>
> Let me know if I should open a JIRA issue.
>

Yes.  JUnit would also be good, if you have it.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


