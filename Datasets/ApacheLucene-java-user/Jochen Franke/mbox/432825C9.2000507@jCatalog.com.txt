FROM: Jochen Franke <Jochen.Fra...@jCatalog.com>
SUBJECT: Optimize: java.lang.IndexOutOfBoundsException
DATE: 14 Sep 2005

Hi,
   when creating indexes I get exeptions like this one:

java.lang.IndexOutOfBoundsException: Index: 107, Size: 44
	at java.util.ArrayList.RangeCheck(ArrayList.java:507)
	at java.util.ArrayList.get(ArrayList.java:324)
	at org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:155)
	at org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java:151)
	at 
org.apache.lucene.index.SegmentTermEnum.readTerm(SegmentTermEnum.java:149)
	at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:115)
	at org.apache.lucene.index.SegmentMergeInfo.next(SegmentMergeInfo.java:52)
	at 
org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:294)
	at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:254)
	at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:93)
	at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:487)
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)


This happens in the IndexWriter.optimize() call after all documents have 
been added and before closing the IndexWriter. The index is created from 
scratch in this process.

The exception seems to occur only when the number of document exceeds a 
certain limit (30000 documents work, 100000 documents do not work).

The problem only occurs on a Linux server! On a Windows server the same
build of the indexing application indexes the same data without any 
problems.

Here some details on the environment:

- Lucene-1.4.3

- Linux server:
   - Redhat Enterprise Linux 3AS
     Linux MedusaApp 2.4.21-20.EL #1 SMP Wed Aug 18 20:34:58 EDT 2004
     x86_64 x86_64 x86_64 GNU/Linux
   - Dual Xeon 3Ghz (8GB)
   - Java(TM) 2 Runtime Environment, Standard Edition
     (build 1.4.2_09-b05)
     Java HotSpot(TM) Client VM (build 1.4.2_09-b05, mixed mode)
   - java -Xmx1024M

- Windows server:
   - Microsoft Windows Server 2003
   - Dual Xeon 3Ghz (3,75GB)
   - java version "1.4.2_03"
     Java(TM) 2 Runtime Environment, Standard Edition
     (build 1.4.2_03-b02)
     Java HotSpot(TM) Client VM (build 1.4.2_03-b02, mixed mode)
   - java Xmx512M


Has anybody an idea what causes this problem or experienced something 
similar?

Thanks in advance,
   Jochen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


