FROM: Dan Armbrust <daniel.armbrust.l...@gmail.com>
SUBJECT: obscure error...
DATE: 3 Jan 2007

This probably isn't a lucene error - but I'm hoping that maybe somebody 
here has seen it before, and can shed some light.

I'm trying to add a simple document to an empty index.  The toString on 
the document looks like this:

Document<stored/compressed,indexed<UNIQUE_DOCUMENT_IDENTIFIER_FIELD:Automobiles-0>

stored/uncompressed,indexed<codingSchemeName:Automobiles> 
stored/uncompressed,indexed<codingSchemeId:urn:oid:11.11.0.1> 
indexed<codeBoundry:T> 
stored/uncompressed,indexed,tokenized<fields:codingSchemeName 
codingSchemeId codeBoundry >>


Simple enough.  This works fine on most systems / platforms.  However - 
when using this jvm:

java -version
java version "1.5.0_10"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_10-b03)
Java HotSpot(TM) 64-Bit Server VM (build 1.5.0_10-b03, mixed mode)

On this system:

uname -a
Linux bmidev2 2.6.18-1.2239.fc5 #1 SMP Fri Nov 10 12:51:06 EST 2006 
x86_64 x86_64 x86_64 GNU/Linux

(Fedora Core 5)

I get this error:

Exception in thread "Thread-6" java.lang.InternalError
	at java.util.zip.Deflater.init(Native Method)
	at java.util.zip.Deflater.<init>(Deflater.java:117)
	at java.util.zip.Deflater.<init>(Deflater.java:134)
	at org.apache.lucene.index.FieldsWriter.compress(FieldsWriter.java:113)
	at org.apache.lucene.index.FieldsWriter.addDocument(FieldsWriter.java:88)
	at 
org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:79)
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:476)
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:462)
	.....
	
The code works just fine if I use the 32 bit counterpart JVM on the same 
system.  The code also works fine if I use the same exact 64 bit JVM on 
a different (Fedora Core 6) system.

I suspect that I have a missing library or some such oddity that the JVM 
is expecting on this system - but how do I track it down?

Any suggestions welcome,

Thanks,

Dan


-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


