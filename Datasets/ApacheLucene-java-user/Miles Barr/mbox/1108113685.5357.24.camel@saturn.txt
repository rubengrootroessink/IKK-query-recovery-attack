FROM: Miles Barr <mi...@runtime-collective.com>
SUBJECT: Re: BOOLEAN  EXCEPTION  APPSERVER
DATE: 11 Feb 2005

On Fri, 2005-02-11 at 12:20 +0530, Karthik N S wrote:
> I am getting this error on  ' Every FIRST SEARCH  after  Startup of
> the WEBSERVER '
> 
> and I have declared the following code only once in the  method of
> execution 
> 
> 
> <%@ page import="org.apache.lucene.search.BooleanQuery"%>
> BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE);
> 
> The Exception  is as follows
> 
> Feb 11, 2005 12:16:42 PM org.apache.catalina.core.StandardWrapperValve
> invoke
> SEVERE: Servlet.service() for servlet jsp threw exception
> java.lang.LinkageError: duplicate class definition:
> org/apache/lucene/search/BooleanQuery
> at java.lang.ClassLoader.defineClass0(Native Method)
> at java.lang.ClassLoader.defineClass(ClassLoader.java:502)
> at
> java.security.SecureClassLoader.defineClass(SecureClassLoader.java:123)
> at
> org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1626)
> at
> org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:850)
> at
> org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1299)
> at
> org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1181)
> at
> org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:148)
> at
> org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:69)

> o/S  = Gentoo Linux
> java = 1.4.1
> Ram = 256
> webserver Tomcat5.5.3

It looks like the class definition is being loaded twice. But if it's
being done by different classloaders it should be fine. You might have
two different versions on Lucene being loaded. Tomcat uses several
classloaders depending on where it finds the JAR file:

http://jakarta.apache.org/tomcat/tomcat-5.5-doc/class-loader-howto.html

Make sure you only have one copy of the Lucene JAR visible to Tomcat.



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


