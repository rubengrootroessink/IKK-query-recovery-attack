FROM: "MariLuz Elola" <mel...@seinet.es>
SUBJECT: OUTOFMEMORY ERROR
DATE: 6 Jul 2005

Hi, I have a problem when I am trying to search a simple query without sorting into an index
with 210.000 documents.
Executing the query several times I am getting the OutOfMemory error.
I am creating an IndexSearcher(pathDir) every search. 
I don´t know if it will be necessary to create only one indexSearcher and caching it,
If I search into an index with only 50.000 documents, the outofMemory error doen´t appear.
------------------------
ENVIROMENT DESCRIPTION:
------------------------

---SERVER---
MEMORY 2GB
APP SERVER Jboss3.2.3
JAVA_OPTS -Xmx640M -Xms640M

----LUCENE 1.4.3-------
INDEX +- 210.000 documents
EACH DOCUMENT +- 20 fields (metadatas)
SIZE TEXT DOCUMENT 1k

------------------------
ERROR:
------------------------
18:52:18,657 ERROR [LogInterceptor] Unexpected Error:
java.lang.OutOfMemoryError
18:52:18,657 ERROR [LogInterceptor] Unexpected Error:
java.lang.OutOfMemoryError
18:52:18,660 ERROR [STDERR] java.rmi.ServerError: Unexpected Error; nested exception is:
        java.lang.OutOfMemoryError
18:52:18,661 ERROR [STDERR]     at org.jboss.ejb.plugins.LogInterceptor.handleException(LogInterceptor.java:374)
18:52:18,661 ERROR [STDERR]     at org.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:195)
18:52:18,661 ERROR [STDERR]     at org.jboss.ejb.plugins.ProxyFactoryFinderInterceptor.invoke(ProxyFactoryFinderInterceptor.java:122)
18:52:18,662 ERROR [STDERR]     at org.jboss.ejb.StatelessSessionContainer.internalInvoke(StatelessSessionContainer.java:331)
18:52:18,662 ERROR [STDERR]     at org.jboss.ejb.Container.invoke(Container.java:700)
18:52:18,662 ERROR [STDERR]     at sun.reflect.GeneratedMethodAccessor40.invoke(Unknown Source)
18:52:18,662 ERROR [STDERR]     at sun.reflect.DelegatingMethodAccessorImpl.invok
..
..
Exception java.lang.OutOfMemoryError: requested 4 bytes for CMS: Work queue overflow; try
-XX:-CMSParallelRemarkEnabled. Out of swap space?


Could anybody help me???

Thanks in advance

    Mari Luz







