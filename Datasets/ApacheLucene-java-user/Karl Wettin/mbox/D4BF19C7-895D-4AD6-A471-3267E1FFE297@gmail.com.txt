FROM: Karl Wettin <karl.wet...@gmail.com>
SUBJECT: Re: Memory consumed by IndexSearcher
DATE: 24 Sep 2009


23 sep 2009 kl. 17.55 skrev Mindaugas Žakšauskas:
>
> I was kind of hinting on the resource planning. Every decent
> enterprise application, apart from other things, has to provide its
> memory requirements, and my point was - if it uses memory, how much of
> it needs to be allocated? What are the boundaries?

There is no function available, if that is what you are asking for?  
How much memory your search application will consume depends on how  
you have built you index and what features you are using.
>
>> How many fields,
> 80
>
>> do you use norms
> yes
>
>> how many documents do you have
> 786

This is a rather small index. I'm surprised it takes 145MB RAM if the  
file size of the index is 22MB. Is this really from just opening an  
FSDirectory? Or is it a RAMDirectory? My guess is the latter. If so,  
did you then benchmark using FSDirectory instead? OS level FS cache  
does a pretty good job. This is sort of leaving your question, but if  
you have been using a RAMDirectory to gain speed, then your index is  
probably small enough to make use of InstantiatedIndex.

> Luke says:
> Has deletions? / Optimized? Yes (1614) / No

This says that you have quite some overhead of deleted documents, some  
2x of the available data in your index is just sitting around for no  
use. Thus if you are using a RAMDirectory you should be able to cut  
the amount of memory consumed to 1/3 by optimizing the index.

You still haven't said that much about your application though so I'm  
just guessing what the problem might be.


      karl
---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


