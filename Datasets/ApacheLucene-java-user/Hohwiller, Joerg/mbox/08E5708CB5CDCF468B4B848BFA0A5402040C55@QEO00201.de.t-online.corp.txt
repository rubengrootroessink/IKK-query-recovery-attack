FROM: "Hohwiller, Joerg" <j.hohwil...@t-online.net>
SUBJECT: Problems deleting documents from the index (Lock obtain timed out)
DATE: 15 Dec 2003

Hi there,

I just subscribed to this list and have a little Problem:

I am using lucene for incremental indexing (yes, I read the FAQ! dont try to convince me to
rebuild the index periodically from scratch :) ).

Now the problem seems to be that lucene is not able to perform index modifications 
and parallel search requests. 
After my simple approaches failed, I finnaly implemented the recomended way to have an index
that is modified and create a copy of that index for searches. I do all this with proper Thread
synchronization (at least I hope so). 
Before I copy the index, I do close the index-writer and index-reader working 
on that index, then copy and reopen the index-writer and -reader on the new copy. Next I close
the index-searcher and reopen it on the index that has been copied before.

Now my problem is that when I receive a delete event and want to remove a document from the
index by a special field (in my case the URI), I get a IOException with the message "Lock
obtain timed out".

I tried lucene 1.3-rc1, 1.3-rc2 and 1.3-rc3 all with the same result.

Any suggestions would be very welcome :)

Thank you so far
  JÃ¶rg Hohwiller

BTW: I attatched the relevant source code (but removed imports, etc. so that it does not contain
any confidential information). Maybe this answers the first of your questions.


