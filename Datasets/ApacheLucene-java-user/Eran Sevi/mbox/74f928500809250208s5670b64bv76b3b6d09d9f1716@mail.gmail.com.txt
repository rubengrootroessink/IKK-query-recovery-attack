FROM: "Eran Sevi" <erans...@gmail.com>
SUBJECT: Optimizing while readers are open
DATE: 25 Sep 2008

Hi,

I have the following scenario using Lucene 2.1

1. Open reader on index to perform some searches.
2. Use reader to check if index is optimized.
2. Open writer and run optimize()
3. Close old reader and open a new reader for further searches.

I expected that after closing the old reader , the index snapshot that was
created because of the optimize would be removed, but that doesn't happen.
I remain with X2 index size even though there are not open readers.

If I open a new reader, I guess it uses the new optimized segment because
isOptimized() returns true.
I don't want to close all the readers/searchers before optimizing because it
is time consuming and I want to allow searching the index in the meantime by
using the same old reader that was opened before the optimization began.No
new readers are opened while the index is optimized.

What am I missing in this scenario?
How can I clear the old redundant files that were used by the reader?

Thanks in advance,
Eran.

