FROM: "Will Allen" <wal...@Cyveillance.com>
SUBJECT: RE: too many open files
DATE: 7 Sep 2004


I suspect it has to do with this change:

--- jakarta-lucene/src/java/org/apache/lucene/index/SegmentMerger.java	2004/08/08 13:03:59
1.12
+++ jakarta-lucene/src/java/org/apache/lucene/index/SegmentMerger.java	2004/08/11 17:37:52
1.13

I wouldn't know where to start to reproduce the problem as it was happening just once a day
or so on an index that was being both queried and added to real time to the tune of 100,000
docs a day / 50 queries a day.

The corruption was always the same thing, the segments file listed an entry to a file that
was not there.

-Will

-----Original Message-----
From: Daniel Naber [mailto:daniel.naber@t-online.de]
Sent: Tuesday, September 07, 2004 1:54 PM
To: Lucene Users List
Subject: Re: Spam:too many open files


On Tuesday 07 September 2004 17:41, wallen@Cyveillance.com wrote:

> A note to developers, the code checked into lucene CVS ~Aug 15th, post
> 1.4.1, was causing frequent index corruptions. Â When I reverted back to
> version 1.4 I no longer am getting the corruptions.

Here are some changes from around that day:

http://cvs.apache.org/viewcvs.cgi/jakarta-lucene/src/java/org/apache/lucene/index/SegmentMerger.java
http://cvs.apache.org/viewcvs.cgi/jakarta-lucene/src/java/org/apache/lucene/index/SegmentReader.java
http://cvs.apache.org/viewcvs.cgi/jakarta-lucene/src/java/org/apache/lucene/index/IndexWriter.java

Could you check which of those might have caused the problem? I guess 
there's not much the developers can do without the problem being 
reproducible.

regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

