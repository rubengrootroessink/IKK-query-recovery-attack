FROM: John Haxby <...@scalix.com>
SUBJECT: Re: NFS
DATE: 18 May 2005

Paul Libbrecht wrote:

> Le 18 mai 05, à 11:51, John Haxby a écrit :
>
>> I haven't tried this, but under Linux (at least), you can specify the 
>> "nolock" parameter to make file locking appen locally.   Of course, 
>> this will make it impossible to use NFS to share the index among 
>> several machines, but, as Otis said, that doesn't seem to be the 
>> requirement here.
>
> Just a hint that we have experienced using Lucene Indexes on NFS 
> partitions to be much much slower than local partitions... aside of 
> the little lock issues.

I had forgotten that Lucene uses lock files rather than file locks so 
the "nolock" parameter wouldn't help.    If (on Linux, don't know if 
this is possibe on an R100) if the file system is exported "async" then 
writing files is going to be rather quicker.   However, frequently 
creating lock files is still likely to be slow -- I don't know the exact 
(OS level) mechanism that lucene uses, but the common mechanisms that I 
can think of are going to be slow regardless of the NFS settings.

If you move the lock files into a local file system then you're just 
left with "normal" NFS performance issues.   If you've got a gigabit 
network then chances are you'll be able to achieve NFS speeds roughly 
comparable with local IDE disks (50MB/s, ish).   If you're restricted to 
a "normal" 100MB network then you're not going to get that kind of 
performance.   Using "async" will greatly help when writing an index, 
as, probably will large buffer sizes.   You'd need to experiment to find 
out what makes a big difference.   The main thing, though, is that the 
default parameters for NFS aren't going to give sparkling performance 
for Lucene.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


