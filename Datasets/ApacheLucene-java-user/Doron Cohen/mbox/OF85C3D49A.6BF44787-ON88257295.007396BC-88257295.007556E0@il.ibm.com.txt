FROM: Doron Cohen <DOR...@il.ibm.com>
SUBJECT: Re: How can I use SortComparator in my case?
DATE: 5 Mar 2007

I too cannot think of an indexing configuration that would help this.

However it seems that all the required information exists at search time,
more precisely at hits collection time:
- the doc-id and doc-score are known, and used when hits are collected.
- The value of that certain field of interested can be computed - similar
to how it is computed for sorting by a field - but its use is different -
sorting should not be by the value of the field, but rather by how many
docs with the same value for this field were "collected" so far.

This seems to call for a tailored hit collector. The search API allows for
providing a customized hit collector, where this counting logic could be
added. (The challenge is in avoiding calling
reader.document(id,fieldSelector) in collect() because this would be quite
bad for performance in a large collection - see javadocs for
HitCollector.collect() - but it must be a large collection, otherwise, for
a small collection, the post process approach proposed here would do.)

Doron

"Erick Erickson" <erickerickson@gmail.com> wrote on 05/03/2007 04:48:10:

> There's a discussion recently where someone pointed me to
> FieldSortedHitQueue, you might trysearchinng for that. Also, try
> "buckets" which was the header of that discussion.
>
> You can also think about clever indexing schemes with fields that
> allow you to sort however you really need to, although I confess
> nothing jumps out at me given your example.
>
> Best
> Erick
>
>
> On 3/5/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> >
> > This will then be a big hastle. The results are in 100s and sometimes
in
> > 1000s.
> > Hum.. No other better way?
> >
> > Jelda
> >
> > > -----Original Message-----
> > > From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]
> > > Sent: Friday, March 02, 2007 8:02 PM
> > > To: java-user@lucene.apache.org
> > > Subject: RE: How can I use SortComparator in my case?
> > >
> > > You'll need to do it manually and not with Lucene.
> > >
> > > Just grab all the results from Lucene and process them yourself.
> > >
> > > Aviran
> > > http://aviransplace.com
> > >
> > > -----Original Message-----
> > > From: Ramana Jelda [mailto:ramana.jelda@ciao-group.com]
> > > Sent: Friday, March 02, 2007 5:45 AM
> > > To: java-user@lucene.apache.org
> > > Subject: How can I use SortComparator in my case?
> > >
> > > Hi,
> > > I have a requirement to sort search results in a round robin.
> > > Ex:sorting results by field "customer"
> > > suppose following customers are found (number of results in
> > > brackets) and results are sorted by customer.
> > >
> > > Amazon(10)
> > > Dell(2)
> > > EBay(4)
> > > Yahoo(20)
> > >
> > > but I want to sort them in the following way,
> > > Amazon(1)
> > > Dell(1)
> > > EBay(1)
> > > Yahoo(1)
> > >
> > > Amazon(1)
> > > Dell(1)
> > > EBay(1)
> > > Yahoo(1)
> > >
> > > Amazon(1)
> > > EBay(1)
> > > Yahoo(1)
> > >
> > > Amazon(1)
> > > EBay(1)
> > > Yahoo(1)
> > >
> > > etc.. etc..
> > >
> > >
> > > You think I can use somehow SortComparator here?
> > > any suggestions?
> > >
> > > Thx,
> > > Jelda
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


