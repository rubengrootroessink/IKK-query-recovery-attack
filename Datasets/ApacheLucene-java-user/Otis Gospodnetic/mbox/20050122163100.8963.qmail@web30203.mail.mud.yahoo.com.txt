FROM: Otis Gospodnetic <otis_gospodne...@yahoo.com>
SUBJECT: Re: Opening up one large index takes 940M or memory?
DATE: 22 Jan 2005

It would be interesting to know _what_exactly_ uses your memory. 
Running under an optimizer should tell you that.

The only thing that comes to mind is... can't remember the details now,
but when the index is opened, I believe every 128th term is read into
memory.  This, I believe, helps with index seeks at search time.  I
wonder if this is what's using your memory.  The number '128' can't be
modified just like that, but somebody (Julien?) has modified the code
in the past to make this variable.  That's the only thing I can think
of right now and it may or may not be an idea in the right direction.

Otis


--- "Kevin A. Burton" <burton@newsmonster.org> wrote:
> We have one large index right now... its about 60G ... When I open it
> 
> the Java VM used 940M of memory.  The VM does nothing else besides
> open 
> this index.
> 
> Here's the code:
> 
>         System.out.println( "opening..." );
> 
>         long before = System.currentTimeMillis();
>         Directory dir = FSDirectory.getDirectory( 
> "/var/ksa/index-1078106952160/", false );
>         IndexReader ir = IndexReader.open( dir );
>         System.out.println( ir.getClass() );
>         long after = System.currentTimeMillis();
>         System.out.println( "opening...done - duration: " + 
> (after-before) );
> 
>         System.out.println( "totalMemory: " + 
> Runtime.getRuntime().totalMemory() );
>         System.out.println( "freeMemory: " + 
> Runtime.getRuntime().freeMemory() );
> 
> Is there any way to reduce this footprint?  The index is fully 
> optimized... I'm willing to take a performance hit if necessary.  Is 
> this documented anywhere?
> 
> Kevin
> 
> -- 
> 
> Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an
> 
> invite!  Also see irc.freenode.net #rojo if you want to chat.
> 
> Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
> 
> If you're interested in RSS, Weblogs, Social Networking, etc... then
> you 
> should work for Rojo!  If you recommend someone and we hire them
> you'll 
> get a free iPod!
>     
> Kevin A. Burton, Location - San Francisco, CA
>        AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


