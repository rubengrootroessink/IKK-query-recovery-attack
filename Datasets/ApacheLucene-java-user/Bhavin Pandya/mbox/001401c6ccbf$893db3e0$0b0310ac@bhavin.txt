FROM: "Bhavin Pandya" <bhav...@rediff.co.in>
SUBJECT: Re: read past EOF
DATE: 31 Aug 2006

>> Mike wrote:
> Were there any other errors leading up to this?  For example, when you
> move your index after it's built, is this actually a copy (and maybe
> the disk filled up when copying)?  Or a previous [initial] exception
> when building the index?
>
> Are you really sure only one writer is building the index at once?
>
> Also is this easily reproduced?


Hi Mike,

Yes I am sure only one writer at a time accessing index.

no i am not getting any other exception.

and there is no problem of disk space also.

right now i have backcopy of indexes so whenever one index got corrupted i m 
replacing with backup one and starting the indexer again from that duration.

Here is the script which i am using to move index after its built.

- rm -rf backupindex/*
- mv index backupindex;
- mv newindex index;
- mkdir newindex
- cp -dpR index/* newindex/
- touch index.done
- echo "done";

where "newindex" is the index which I am using for indexing...."index" which 
i am using for search purpose....and "backupindex" contains previous index.

Is there any way through which  I can check if index is corrupt or 
not....right now because of this exception (read past EOF ) i made few 
changes in my code to check for corrupt index. But i am checking for corrupt 
index through optimizing...If in optimization of index i m getting 
IOException I am considering that index got corrupted or there is permission 
issue..

Thanks.
Bhavin



----- Original Message ----- 
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, August 31, 2006 8:01 AM
Subject: Re: read past EOF


> Bhavin Pandya wrote:
>> My guess is ..."One of my index is got corrupted so whenever I am trying 
>> to search the index or optimize the index or merging the multiple index 
>> ...It will throws same exception but from different class...sometime from 
>> IndexReader or sometime from IndexWriter depends on how it is being 
>> called"
>
> It indeed looks like you have an X.cfs file that is truncated.  It would
> be good to get to the root cause that led to this ...
>
> Were there any other errors leading up to this?  For example, when you
> move your index after it's built, is this actually a copy (and maybe
> the disk filled up when copying)?  Or a previous [initial] exception
> when building the index?
>
> Are you really sure only one writer is building the index at once?
>
> Also is this easily reproduced?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


