FROM: Hanna <jea...@gmx.de>
SUBJECT: FileNotFoundException when optimizing
DATE: 24 Sep 2003

Hello,

we use Lucene 1.2 to index data of a content management system on a
solaris machine.

Our problem is that the segments file seems not to be up to date. When
the IndexWriter.optimize() method is used, a FileNotFoundException is
thrown. The file that is looked for does not exist.

This issue was posted before, but it has not been answered yet. So I
try it again. Here is the stacktrace of the exception:

java.io.FileNotFoundException: /var/spool/www/index/otv/_19bi.fnm (No such file or directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:139)
        at org.apache.lucene.store.FSInputStream$Descriptor.<init>(Unknown Source)
        at org.apache.lucene.store.FSInputStream.<init>(Unknown Source)
        at org.apache.lucene.store.FSDirectory.openFile(Unknown Source)
        at org.apache.lucene.index.FieldInfos.<init>(Unknown Source)
        at org.apache.lucene.index.SegmentReader.<init>(Unknown Source)
        at org.apache.lucene.index.IndexWriter.mergeSegments(Unknown Source)
        at org.apache.lucene.index.IndexWriter.optimize(Unknown Source)
        at de.blueorange.xred.search.LuceneIndexer.closeWriter(LuceneIndexer.java:650)
        at de.blueorange.xred.search.LuceneIndexer.close(LuceneIndexer.java:701)
        at de.blueorange.xred.search.LuceneIndexer.executeRequest(LuceneIndexer.java:278)
        at de.blueorange.xred.search.LuceneIndexer.run(LuceneIndexer.java:306)
        at java.lang.Thread.run(Thread.java:479)


There are several other files which are not found.

What could be the cause of the old entries in the segments file? Maybe
there is a problem with concurrent reading and writing threads?


Thanks a lot
Hanna


