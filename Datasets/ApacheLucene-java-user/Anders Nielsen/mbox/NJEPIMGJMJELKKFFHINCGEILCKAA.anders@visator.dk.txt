FROM: "Anders Nielsen" <and...@visator.dk>
SUBJECT: RE: Errors when an update occurs while a search is under way
DATE: 12 Nov 2001

Hello All,

It seems I jumped the gun here, so please disregard the message below.

(There was a part of my code that didn't check whether the IndexReader I am
using, had been modified).

Venlig hilsen

Anders Nielsen
Adm. direktør

_____________

Visator ApS
Kroghsgade 1
2100 Kbh. Ø
Tlf: 35 55 47 02
Mobil: 26 71 36 63
_____________




-----Original Message-----
From: Anders Nielsen [mailto:anders@visator.dk]
Sent: 12. november 2001 11:39
To: Lucene Users List
Subject: Errors when an update occurs while a search is under way


I am getting occasional errors when I search, and it seems it is when an
update starts while the search is going on.

I have a cronjob that loads documents into the lucene index every 5 minutes,
and then I have a webserver from which users can search the index from.

Isn't there supposed to be an exclusive-lock that prohibits writing while a
search is ongoing?

the error I get is:

java.io.IOException: Bad file descriptor
        at java.io.RandomAccessFile.seek(Native Method)
        at
org.apache.lucene.store.FSInputStream.readInternal(FSDirectory.java:271)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:166)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:80)
        at
org.apache.lucene.store.InputStream.readVInt(InputStream.java:106)
        at
org.apache.lucene.index.SegmentTermEnum.readTerm(SegmentTermEnum.java:127)
        at
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:114)
        at
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:166)
        at
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:161)
        at
org.apache.lucene.index.TermInfosReader.terms(TermInfosReader.java:217)
        at
org.apache.lucene.index.SegmentReader.terms(SegmentReader.java:183)
        at
org.apache.lucene.index.SegmentsTermEnum.<init>(SegmentsReader.java:182)
        at
org.apache.lucene.index.SegmentsReader.terms(SegmentsReader.java:144)


Venlig hilsen

Anders Nielsen
Adm. direktør

_____________

Visator ApS
Kroghsgade 1
2100 Kbh. Ø
Tlf: 35 55 47 02
Mobil: 26 71 36 63
_____________



--
To unsubscribe, e-mail:
<mailto:lucene-user-unsubscribe@jakarta.apache.org>
For additional commands, e-mail:
<mailto:lucene-user-help@jakarta.apache.org>



--
To unsubscribe, e-mail:   <mailto:lucene-user-unsubscribe@jakarta.apache.org>
For additional commands, e-mail: <mailto:lucene-user-help@jakarta.apache.org>


