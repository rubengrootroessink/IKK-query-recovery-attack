FROM: petite_abeille <petite_abei...@mac.com>
SUBJECT: FileNotFoundException: a typical stack trace
DATE: 28 Apr 2002

Just to follow up on this, here is a typical stack trace for 
FileNotFoundException:

04/28 09:17:55 (Warning) SZIndexer.indexObjectWithValues: 
java.io.FileNotFoundException: _2o.prx (Too many open files)
java.io.FileNotFoundException: _2o.prx (Too many open files)
         at java.io.RandomAccessFile.open(Native Method)
         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:98)
         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:143)
         at com.lucene.store.FSInputStream.<init>(FSDirectory.java:161)
         at com.lucene.store.FSDirectory.openFile(FSDirectory.java:145)
         at 
com.lucene.index.SegmentReader.openProxStream(SegmentReader.java:178)
         at 
com.lucene.index.SegmentTermPositions.open(SegmentTermPositions.java:39)
         at 
com.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:177)
         at 
com.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:157)
         at 
com.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:138)
         at 
com.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:101)
         at com.lucene.index.SegmentMerger.merge(SegmentMerger.java:54)
         at 
com.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:267)
         at 
com.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:241)
         at com.lucene.index.IndexWriter.optimize(IndexWriter.java:163)
         at com.lucene.index.IndexWriter.addIndexes(IndexWriter.java:178)
         at alt.dev.szobject.SZIndex.flush(SZIndex.java:399)

And here is what I'm doing in the flush method:

	private void flush() throws IOException
	{
		if ( ( _ramDirectory != null ) &&
			( _ramDirectory.list() != null ) &&
			( _ramDirectory.list().length > 0 ) &&
			( _ramWriter != null ) )
		{
			_ramWriter.optimize();
			_ramWriter.close();
		
			this.writer().addIndexes( new Directory[] { _ramDirectory } );
			
			_ramWriter = null;
			_ramDirectory = null;
			
			_reader = null;
			_searcher = null;
		}
	}


Any insight more than welcome.

Thanks.

PA


--
To unsubscribe, e-mail:   <mailto:lucene-user-unsubscribe@jakarta.apache.org>
For additional commands, e-mail: <mailto:lucene-user-help@jakarta.apache.org>


