FROM: petite_abeille <petite_abei...@mac.com>
SUBJECT: java.io.IOException: Bad file descriptor?
DATE: 7 Jul 2002

Hello,

I'm trying to use the latest, greatest Lucene version and I'm running 
into the following exception time to time:

"java.io.IOException: Bad file descriptor"

Here is a typical stack trace:

java.io.IOException: Bad file descriptor
         at java.io.RandomAccessFile.readBytes(Native Method)
         at java.io.RandomAccessFile.read(RandomAccessFile.java:219)
         at org.apache.lucene.store.FSInputStream.readInternal(Unknown 
Source)
         at org.apache.lucene.store.InputStream.refill(Unknown Source)
         at org.apache.lucene.store.InputStream.readByte(Unknown Source)
         at org.apache.lucene.store.InputStream.readVInt(Unknown Source)
         at org.apache.lucene.index.SegmentTermDocs.read(Unknown Source)
         at org.apache.lucene.search.TermScorer.<init>(Unknown Source)
         at org.apache.lucene.search.TermQuery.scorer(Unknown Source)
         at org.apache.lucene.search.BooleanQuery.scorer(Unknown Source)
         at org.apache.lucene.search.MultiTermQuery.scorer(Unknown Source)
         at org.apache.lucene.search.Query.scorer(Unknown Source)
         at org.apache.lucene.search.IndexSearcher.search(Unknown Source)
         at org.apache.lucene.search.Hits.getMoreDocs(Unknown Source)
         at org.apache.lucene.search.Hits.hitDoc(Unknown Source)
         at org.apache.lucene.search.Hits.doc(Unknown Source)

Or:

java.io.IOException: Bad file descriptor
         at java.io.RandomAccessFile.readBytes(Native Method)
         at java.io.RandomAccessFile.read(RandomAccessFile.java:219)
         at org.apache.lucene.store.FSInputStream.readInternal(Unknown 
Source)
         at org.apache.lucene.store.InputStream.refill(Unknown Source)
         at org.apache.lucene.store.InputStream.readByte(Unknown Source)
         at org.apache.lucene.store.InputStream.readChars(Unknown Source)
         at org.apache.lucene.index.SegmentTermEnum.readTerm(Unknown 
Source)
         at org.apache.lucene.index.SegmentTermEnum.next(Unknown Source)
         at org.apache.lucene.index.TermInfosReader.scanEnum(Unknown 
Source)
         at org.apache.lucene.index.TermInfosReader.get(Unknown Source)
         at org.apache.lucene.index.SegmentReader.docFreq(Unknown Source)
         at org.apache.lucene.search.IndexSearcher.docFreq(Unknown Source)
         at org.apache.lucene.search.Similarity.idf(Unknown Source)
         at 
org.apache.lucene.search.TermQuery.sumOfSquaredWeights(Unknown Source)
         at 
org.apache.lucene.search.BooleanQuery.sumOfSquaredWeights(Unknown Source)
         at 
org.apache.lucene.search.MultiTermQuery.sumOfSquaredWeights(Unknown 
Source)
         at org.apache.lucene.search.Query.scorer(Unknown Source)
         at org.apache.lucene.search.IndexSearcher.search(Unknown Source)
         at org.apache.lucene.search.Hits.getMoreDocs(Unknown Source)
         at org.apache.lucene.search.Hits.hitDoc(Unknown Source)
         at org.apache.lucene.search.Hits.doc(Unknown Source)


Any ideas on what could go wrong?

My app (a desktop app) has multiple threads doing 
read/write/search/delete on multiple indexes simultaneously.

For the record, I'm using Lucene build #2002062 under osx 10.1.5 and 
java version 1.3.1.

Thanks for any help.

Cheers,

PA.


--
To unsubscribe, e-mail:   <mailto:lucene-user-unsubscribe@jakarta.apache.org>
For additional commands, e-mail: <mailto:lucene-user-help@jakarta.apache.org>


