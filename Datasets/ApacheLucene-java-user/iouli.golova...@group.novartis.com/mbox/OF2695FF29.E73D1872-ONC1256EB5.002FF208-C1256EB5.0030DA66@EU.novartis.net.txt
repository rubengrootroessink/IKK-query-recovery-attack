FROM: iouli.golova...@group.novartis.com
SUBJECT: Re: RuntimeException: cannot determine sort type!
DATE: 16 Jun 2004

As a matter of fact there are no end. I just try to simulate the real 
life, i.e.  information is coming  from different providers with speed 3-5 
messages per s. I cash it ( c. 300 entries in bulk)  and process the whole 
bulk. After that I optimize, otherwise search is too slow.





Hello,

I can't comment on the soft exception (Erik or Tim may be able to
help), but I can comment on optimizing your index after every 300
entries:
unless your search is getting too slow, or you are running out of file
handles, there is no need to optimize the index while you are building
it, and that actually prolongs indexing.  Just optimize it at the end.

Otis


--- iouli.golovatyi@group.novartis.com wrote:
> Hello all,
> 
> During concurency test, i.e. indexing and searching simultaniosly, 
> Searcher stumbled with following error: 
> 
> java.lang.RuntimeException: no terms in field modified - cannot
> determine 
> sort type
>         at 
>
org.apache.lucene.search.FieldSortedHitQueue.determineComparator(FieldSortedHitQueue.java:187)
>         at 
>
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:125)
>         at 
>
org.apache.lucene.search.MultiFieldSortedHitQueue.<init>(MultiFieldSortedHitQueue.java:54)
>         at 
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:118)
>         at 
> org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:141)
>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>         at org.apache.lucene.search.Hits.<init>(Hits.java:51)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:41)
>         at novartis.lucene.LuceneItems.getItems(LuceneItems.java:304)
>         at
> novartis.lucene.LuceneItems.doAllItems(LuceneItems.java:246)
>         at novartis.lucene.LuceneItems.go(LuceneItems.java:368)
>         at novartis.lucene.LuceneItems.main(LuceneItems.java:574)
> 
> Indexer  was optimizing  and closing after every 300 entries.
> 
> Searcher did query every second:  hits = ms.search(query,new
> Sort("modified",true));
> where "modified" is in DateField.timeToString(modified)) format and
> query 
> like "+contents:novartis"
> 
> The values for field "modified" are definitly existing.
> 
> On Indexer side no exceptions took place. 
> 
> Both processes used the same lockDir.
> 
> Searcher works smartly on created index.
> 
> Please help.
> 
> Have a nice day
> J.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




