FROM: Ben Armstrong <BArmstr...@dymaxion.ca>
SUBJECT: Re: Solr/Lucene on OpenVMS, filesystem-specific issues
DATE: 5 Jan 2010

Ben Armstrong wrote:
> I am trying to get Solr 1.4.0 to work on OpenVMS V8.3 Alpha with Java 
> 1.5.0-6.p1.
...
> If Lucene would consider the segment number to end at a final period 
> instead of scanning to the end of the string, then I could get past 
> this error.
>
> I looked at the other possible JAVA$FILENAME_CONTROLS and none of them 
> address this particular issue.  The "multi-dot-in-file" controls have 
> to do with which side of the filename any additional dots end up in.  
> On a VMS filesystem, whether it is ODS-2 or ODS-5, at least one dot 
> separating the filename and the extension is mandatory.  If there are 
> additional dots in the filename, they need to be either mangled (as in 
> the case of ODS-2, usually by replacing them with underscores) or else 
> they need to be quoted as "^." (as in the case of ODS-5).  I believe 
> the "Support multi dot in file, keeping last" and "keeping first" 
> controls just govern where the mandatory (unquoted, unmangled) dot 
> goes.  And in any event, these only affect multi-dot filenames, e.g. 
> "extra.dot.dat", not extensionless files, e.g. "segment_1.", so for 
> Lucene to work on VMS, it needs to accommodate for this 
> filesystem-specific oddity.

This morning, I discussed with rjent and ThetaPh1 on #lucene @ 
irc.freenode.net about this problem and they made some helpful 
suggestions.  Here is a summary of what they told me:

Is there no way to switch off the mandatory period in VMS?  [No.]

Lucene should not change for this bogus behaviour.

Can you use another platform?  [No, not easily.]

Get your jvm vendor to support filename mangling properly.  [OK, I will 
ask HP, but this will take time.]

In the meantime, try a VMSFSdirectory wrapper that extends 
SimpleFSDirectory and rewrite all methods using filenames and pass 
through a rewrite method.

Maybe there is some open source filename mangler/demangler already?  [I 
will look.]

If all else fails, there may be contrib/db stores in berkeley db that 
might work if you don't want to write code.



So, I would like to thank #lucene again for their helpful suggestions.  
I will ask both HP and the OpenVMS support community for further 
assistance based on this advice.

Ben



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


