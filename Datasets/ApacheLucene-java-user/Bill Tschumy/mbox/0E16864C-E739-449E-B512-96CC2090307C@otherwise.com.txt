FROM: Bill Tschumy <b...@otherwise.com>
SUBJECT: Another index corruption problem
DATE: 25 Oct 2005

Many months ago I wrote this list about a corrupted index that one of  
my customers had.  It was a mystery that was never really solved.   
Well, it has happened again and the stack trace looks almost  
identical.  Here is the exception:

java.io.FileNotFoundException: /Users/samegan/Library/Preferences/ 
Parsnips/IndexData/_1d.fnm (No such file or directory)
     at java.io.RandomAccessFile.open(Native Method)
     at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
     at org.apache.lucene.store.FSInputStream$Descriptor.<init> 
(FSDirectory.java:376)
     at org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java: 
405)
     at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java: 
268)
     at org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:53)
     at org.apache.lucene.index.SegmentReader.initialize 
(SegmentReader.java:109)
     at org.apache.lucene.index.SegmentReader.<init> 
(SegmentReader.java:94)
     at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java: 
122)
     at org.apache.lucene.store.Lock$With.run(Lock.java:109)
     at org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
     at org.apache.lucene.index.IndexReader.open(IndexReader.java:106)
     at org.apache.lucene.search.IndexSearcher.<init> 
(IndexSearcher.java:43)
     at com.otherwise.parsnips.MySearcher.getSearcher(MySearcher.java: 
96)
     at com.otherwise.parsnips.IndexUpdater.checkIndexVersion 
(IndexUpdater.java:35)
     at com.otherwise.parsnips.Parsnips.initIndex(Parsnips.java:1043)
     at com.otherwise.parsnips.Parsnips.<init>(Parsnips.java:148)
     at com.otherwise.parsnips.Parsnips.mainInEventThread 
(Parsnips.java:1158)
     at com.otherwise.parsnips.Parsnips$4.run(Parsnips.java:1115)
     at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java: 
189)
     at java.awt.EventQueue.dispatchEvent(EventQueue.java:478)
     at java.awt.EventDispatchThread.pumpOneEventForHierarchy 
(EventDispatchThread.java:234)
     at java.awt.EventDispatchThread.pumpEventsForHierarchy 
(EventDispatchThread.java:184)
     at java.awt.EventDispatchThread.pumpEvents 
(EventDispatchThread.java:178)
     at java.awt.EventDispatchThread.pumpEvents 
(EventDispatchThread.java:170)
     at java.awt.EventDispatchThread.run(EventDispatchThread.java:100)

This is a compound index, so I guess the .fnm file it is looking for  
is internal to it or temporary in some way.  The customer thinks the  
problem was caused by accidentally pasting an entire document into  
the "title" field and saving.  I kind of doubt this caused the  
problem, but you never know.  I treat the "title" and the "body"  
identically for indexing.

The person is pretty panicked about his lost data.  Does anyone have  
any hints as to how to edit the file to get it back functioning  
again?  I've heard of people using hex editors for this.

After solving his immediate problem, I need to figure out why this is  
happening.  I haven't followed this list for a couple of months.  Has  
anything like this come up recently?  I am using Lucene-1.4.3.
-- 
Bill Tschumy
Otherwise -- Austin, TX
http://www.otherwise.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


