FROM: Rob Young <bubble...@gmail.com>
SUBJECT: Re: Splitting the index
DATE: 28 Sep 2006

On Wednesday 27 September 2006 18:51, Erik Hatcher wrote:
> Lots of possible issues, but we need more information to troubleshoot
> this properly.   
> How big is your index, number of documents?  
CDs       137,390
DVDs       41,049
Games       3,360
Books     648,941
Total     830,740

> total file system size of the index?
segments    31b
deletable    4b
index      286Mb

> is your index optimized?  
Yes, after every 1000 adds

> how often do you update the index?
Continuously. We have document builders running for each product type. They 
pull all products of their type which have changed since their last index 
time, build the documents and stick them in a queue for the indexer (this 
includes deletes), sleep for an hour and repeat. The indexer processes the 
queue optimising the index every 1000 documents.

> how are you managing indexsearcher instances after the index is updated?
My main search class is a Runnable, in it's run method it does the following.
while( !this.stop ) {
  try {
    Thread.sleep( 1000 * 60 * 5 );
    this.indexSearcher = 
      new IndexSearcher( 
        new RAMDirectory( 
          FSDirectory.getDirectory(
            this.index_directory, true
          )
        )
      )
    );
  } catch( IOException e ) {
    log.severe( "Failed to reload the searcher" );
  } catch( InterruptedException e ) {
    log.notice( "Index reloading interrupted" );
  }
}


I have replied to the other message in this thread with the questions asked 
there as well.

Many Thanks
Rob

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


