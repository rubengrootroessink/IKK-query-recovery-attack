FROM: Chris Hostetter <hossman_luc...@fucit.org>
SUBJECT: CheckIndex:  pos -1 is out of bounds
DATE: 30 Mar 2008


Hey guys, a Solr user just encountered an interesting situation...

...due to a naive "LengthFilter", an Analyzer is produce a TokenStream 
where the first Token has a positionIncrement of "0" which seems to 
produce this error from CheckIndex...

     WARNING: would remove reference to this segment (-fix was not 
specified); full exception:
java.lang.RuntimeException: term features:usa: doc 0: pos -1 is out of 
bounds
         at org.apache.lucene.index.CheckIndex.check(CheckIndex.java:205)
         at org.apache.lucene.index.CheckIndex.main(CheckIndex.java:362)

...but as far as i can tell, the index is still usable.

Questions are:
   1) is CheckIndex over paranoid?
   2) shouldn't IndexWriter have protected against this if it is incorrect?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


