FROM: Chris Hostetter <hossman_luc...@fucit.org>
SUBJECT: Re: When do files in 'deleteable' get deleted?
DATE: 14 Feb 2006


: That gets things into the 'deleteable' file - but its never actually
: deleting all of the files from the deleteable file.  I'm almost always
: ending up with at least 1 duplicate copy of my index.

I think it only tries to delete the files listed in deletable prior to
trying to delete any other fields it needs to delete.  It might make sense
for there to be an optional way to "suggest" that now would be a good time
to try. ... you could submit a patch that adds a public method for doing
this to IndexWriter, i think it just needs to look like this...

    public void suggestDeleteDeletable() {
      Vector deletable = new Vector();
      deleteFiles(readDeleteableFiles(), deletable);
      writeDeleteableFiles(deletable);
    }


I *think* if you call IndexWriter.addIndexes(new IndexReader[] { }) it
will force this behavior without needing a patch ... but that is
definitely a hack.

(I haven't tried any ofthis, I'm just guessing based on a quick code skim)





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


