FROM: Chris Hostetter <hossman_luc...@fucit.org>
SUBJECT: Re: Is it possible to do near terms without using phrase slop in query parser syntax?
DATE: 29 May 2007


: I've found that trying to specify a near query using something like:
: actor_name_mv:"Foster, Jody"~2
: matches "Foster, Jody" with a tf score of 1, but it matches "Jody
: Foster" with a tf score of .577  The phraseFreq in the first case is 1
: and the phraseFreq in the second is 1/3.

as i recall, phraseFreq is passed to the tf(float) function of your
similarity, you can get differnet behavior between the tf() for phrase
queries and simple term queries by having different tf impls for tf(float)
- used for phrases; and tf(int) - used for terms.  by default, tf(int)
calls tf(float)

so you could make tf(float) round up to hte nearest int, and then
fractional phraseFreqs should score the same as exact phraseFreqs.  do
some testing of cases where the phrase matches more then once on the same
field though ... it may not be what you expect ( i believe the
phraseFreqs are summed before calling tf() so there is no way to tell the
differnce between 1 exact match with a phraseFreq of "1" and 2 sloppy
matches each with phraseFreqs of 0.5.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


