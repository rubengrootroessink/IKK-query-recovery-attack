FROM: Chris Lamprecht <clampre...@gmail.com>
SUBJECT: Re: Lucene on Linux problem...
DATE: 2 Apr 2005

I've also been getting this error very rarely on a production system
with lots of search queries.  The system is Fedora 1 using ext3.  It
happens in the call to IndexReader.getCurrentVersion(indexPath).  I
think it happens when the separate indexing process is running or has
just run (from a separate JVM).  Here is the stack trace:

Caused by: java.io.FileNotFoundException: /lucene/segments
(No such file or directory)
       at java.io.RandomAccessFile.open(Native Method)
       at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
       at
org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java:376)
       at org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
       at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
       at
org.apache.lucene.index.SegmentInfos.readCurrentVersion(SegmentInfos.java:106)
       at
org.apache.lucene.index.IndexReader.getCurrentVersion(IndexReader.java:214)
       at
org.apache.lucene.index.IndexReader.getCurrentVersion(IndexReader.java:200)
       at
org.apache.lucene.index.IndexReader.getCurrentVersion(IndexReader.java:187)
[...]

On Apr 2, 2005 2:29 AM, Kristian Ottosen <ko@yawah.com> wrote:
> Hello,
> 
> I have really been pulling out hair for a while over this. The problem only
> occur using FSDirectory on some Linux system (some Debian, Suse and Redhat -
> but not all) and never under Windows, Solaris or Mac OS X.
> 
> What happens is that Lucene for some reason tries to read a segment which
> was just merged into another segment and therefore deleted and fails with a
> FileNotFoundException.
> 
> A few facts: Only a single thread is involved. If we use a RAM based Store
> (RAMDirectory) there is no problem at all. Also there seems to a problem
> related to locking using the lock files. We get timeouts even though there
> is only a single thread working on the index. Switching the compound file
> format on/off makes no difference. The problem may not appear immediately -
> but only after several thousand documents have been indexed in a row using a
> combination of IndexSearcher (check for duplicates) and IndexWriter (add
> document) operations.
> 
> I wonder if there is general problem running Lucene on top of some of the
> journaling file systems like ReiserFS or Ext3?
> 
> Any help or hints are greatly appreciated. Lucene is an excellent piece of
> software.
> 
> Best Regards
> Kristian
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


