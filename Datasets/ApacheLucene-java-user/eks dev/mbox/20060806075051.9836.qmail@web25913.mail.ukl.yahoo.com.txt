FROM: eks dev <eks...@yahoo.co.uk>
SUBJECT: Re: running a lucene indexing app as a windows service on xp, crashing
DATE: 6 Aug 2006

XP Proffesionall / win 2003 Server, we had this issue on JVMs 1.5/1.6.

It seams it this happens "not so often" on 1.6/Win2003, but we have this in production only
for 2 weeks.

We have single update machine that builds index in batch and replicates to many Index readers,
so at least customers are not affected by this annoyance, they get their updates only a few
hours later ...

Anyhow, I would be really interested to have this problem solved somehow, my logic was if
ant never had this problem (not that I know), let us try their approach.  What is annoyance
for me personally is that I am not able to reproduce this problem reliably enough... happens
only in production once in a month (daily updates, ca 40Mio documents)

What Store you use, MMAP or FS? IndexWriter cannot function with MMAP on our machines (yet
another WIN problem), Reader works like a charm 

On a side note,   Latest 1.6 binaries look stable (as far as our Lucene based app is concerned),
 brings nice speed-up  for free (up to 30% on 64 bit platforms!) 


----- Original Message ----
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Sent: Saturday, 5 August, 2006 10:33:31 PM
Subject: Re: running a lucene indexing app as a windows service on xp, crashing


> This is windows/jvm issue . Have a look at how ant is dealing with it, maybe we could
give it a try with something like that (I have not noticed ant having problems).

Indeed it seems like Windows somehow believes the "deletable" file must 
be still held open, given that the File.renameTo and also the "fallback" 
open failed.

I tried a quick test to reproduce this but could not.  I just modified 
the demo IndexFiles command line tool to add documents forever, then 
used Windows Explorer to refresh like crazy...  I tested with Sun JDK 
1.4.2 on Windows XP Pro SP 2.

Which JDK / version, and Windows XP version, are you using?

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


