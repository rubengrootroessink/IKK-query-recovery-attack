FROM: Toke Eskildsen ...@statsbiblioteket.dk>
SUBJECT: Re: slow search threads during a disk copy
DATE: 24 Aug 2010

On Mon, 2010-08-23 at 11:43 +0200, gaganb@graffiti.net wrote:
> Intererstingly, the copy is quite fast (around 30s) when there are no searches in progress.

I agree with Anshum: This looks very much like IO contention.

However, it might not just be a case of seek-time trouble: We've had
similar problems on our Linux server with when copying large files from
harddisk A to A while performing searches on SSD B.

Our low-level guys tells me that this was due to the write-buffer being
filled and that reads were blocked while it was flushed (AFAIR). We've
experimented by mounting with sync instead of async which gave us much
better response times during copying at the cost of a substantially
slower copy. dirsync should also be worth looking into.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


