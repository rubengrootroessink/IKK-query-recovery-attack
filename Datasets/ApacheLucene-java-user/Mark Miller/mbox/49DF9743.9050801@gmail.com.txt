FROM: Mark Miller <markrmil...@gmail.com>
SUBJECT: Re: RangeFilter performance problem using MultiReader
DATE: 10 Apr 2009

Michael McCandless wrote:
> On Fri, Apr 10, 2009 at 2:32 PM, Mark Miller <markrmiller@gmail.com> wrote:
>
>   
>> I had thought we would also see the advantage with multi-term queries - you
>> rewrite against each segment and avoid extra seeks (though not nearly as
>> many as when enumerating every term). As Mike pointed out to me back when
>> though : we still rewrite against the multi-reader and so see no real
>> savings here. Unfortunately.
>>     
>
> But, RangeQuery.rewrite is simply enumerating terms, which I think is
> working "OK".
>
> It's enumerting terms, then seeking a sister TermDocs to each term,
> that tickles the over-seeking problem.  FieldCache does that, and
> RangeFilter on 2.4 does that, but RangeFilter (or RangeQuery with
> constant score mode) on 2.9 should not (they should do it per
> segment), which is why I'm baffled that Raf didn't see a speedup on
> upgrading.
>
> Mike
Ah, right - anything utilizing a filter will see the gain. It wouldn't 
be such a big gain unless there were a *lot* of matching terms though 
right? Fieldcache is so bad because its every term. A smaller percentage 
of terms for a field won't be nearly the problem.

-- 
- Mark

http://www.lucidimagination.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


