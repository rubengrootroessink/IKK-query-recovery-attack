FROM: Jake Mannix <jake.man...@gmail.com>
SUBJECT: Re: file open handles?
DATE: 27 Jan 2010

On Wed, Jan 27, 2010 at 12:17 AM, Jamie <jamie@stimulussoft.com> wrote:

> Hi Jake
>
>
>  You were indexing but not searching?  So you are never calling getReader()
>> in the first place?
>>
>>
> Of course, the call exists, its just that during testing we did not execute
> any searches at all.


Oh!  Re-reading your initial post - you're just seeing lots of files which
haven't quite yet
been cleaned up during indexing, it looks like, yes?  There are threads
going on in the
background which are merging segments and deleting old files, these should
go away
over time.

Do you see that they are still around after a very long period?  How high
does the file count grow?


>
>  How have you been doing search in a realtime fashion with Lucene before
>> 2.9's introduction of
>> IndexWriter.getReader()?
>>
>>
> Nope. I previously used to open and close the reader on each search. When I
> noticed the getReader() functionality
> was available, I jumped at it. It immediately offered significant
> performance increases...
>

Gah!  You must have a pretty small index, for that to be performant.  That's
historically been a really good way to
kill your search performance.  "significant performance increases" in
comparison to opening new IndexReader
per request in the pre-2.9 days indeed!

  -jake

