FROM: Doug Cutting <cutt...@apache.org>
SUBJECT: Re: Lucene shouldn't use java.io.tmpdir
DATE: 9 Jul 2004

Armbrust, Daniel C. wrote:
> The problem I ran into the other day with the new lock location is that Person A had
started an index, ran into problems, erased the index and asked me to look at it.  I tried
to rebuild the index (in the same place on a Solaris machine) and found out that A) - her
locks still existed, B) - I didn't have a clue where it put the locks on the Solaris machine
(since no full path was given with the error - has this been fixed?) and C) - I didn't have
permission to remove her locks.

I think these problems have been fixed.  When an index is created, all 
old locks are first removed.  And when a lock cannot be obtained, it's 
full pathname is printed.  Can you replicate this with 1.4-final?

> I think the locks should go back in the index, and we should fall back or give an option
to put them elsewhere for the case of the read-only index.

Changing the lock location is risky.  Code which writes an index would 
not be required to alter the lock location, but code which reads it 
would be.  This can easily lead to uncoordinated access.

So it is best if the default lock location works well in most cases.  We 
try to use a temporary directory writable by all users, and attempt to 
handle situations like those you describe above.  Please tell me if you 
continue to have problems with locking.

Thanks,

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


