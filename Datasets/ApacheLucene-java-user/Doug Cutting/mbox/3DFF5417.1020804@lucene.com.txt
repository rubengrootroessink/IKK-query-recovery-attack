FROM: Doug Cutting <cutt...@lucene.com>
SUBJECT: Re: write.lock file
DATE: 17 Dec 2002

Sale, Doug wrote:
> it depends on what you mean by corrupt.  i think there are 3 cases:
> 1) the process died during a non-writing action (woo-hoo!)
> 2) the process died during a user-writing action (building a document)
> 3) the process died during a system-writing action (writing an index file)
> 
>   i don't know of any way to verify an index.  anyone?
> 
> in cases 1 or 2, the index should be structurally correct - you might be
> missing some docs in case2...
> 
> in case 3 you might have a problem.  if you could determine which entries
> were being written during the process that died, you could delete those
> entries and re-index them.  however, it is possible that some of the global
> files, like the dictionary might be hosed.  i think this is a case of
> "you'll know if it's broken" - receive exceptions during routine reads or
> writes.

Index updates are atomic, so it is very unlikely that the index is 
corrupted, unless the underlying file system itself is corrupted.

Doug


--
To unsubscribe, e-mail:   <mailto:lucene-user-unsubscribe@jakarta.apache.org>
For additional commands, e-mail: <mailto:lucene-user-help@jakarta.apache.org>


