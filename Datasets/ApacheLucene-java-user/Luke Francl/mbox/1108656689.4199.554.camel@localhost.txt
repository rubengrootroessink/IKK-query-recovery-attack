FROM: Luke Francl <luke.fra...@stellent.com>
SUBJECT: RE: Concurrent searching & re-indexing
DATE: 17 Feb 2005

On Thu, 2005-02-17 at 04:44, Paul Mellor wrote:
> "on windows you cannot delete open files, so Lucene AFAIK (I don't use
> windows) postpones the deletion to a time, when the file is closed"
> 
> If Lucene does not in fact postpone the deletion, that would explain the
> exception I'm seeing ("java.io.IOException: couldn't delete _a.f1") - the
> IndexWriter is attempting to delete the files but the IndexReader has them
> open.
> 
> Does this then mean that re-indexing whilst searching is inherently unsafe,
> but only on Windows?

Using Lucene 1.3 final, I ran across what I believe to be this problem.

Under heavy load on Windows, deleting the segments file would fail
sometimes. 

I tried to duplicate the problem with an attached debugger, but I was
unable to do so.

There's more details about my problem in this message:
http://nagoya.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgNo=11986

Any advice would still be appreciated. Currently, I'm catching the error
and doing a retry in the finally block, but I am not confident in this
solution due to the difficulty of reproducing the problem.

Regards,
Luke Francl


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


