FROM: Luke Francl <luke.fra...@stellent.com>
SUBJECT: RE: Multi-threading problem: couldn't delete segments
DATE: 13 Jan 2005

On Thu, 2005-01-13 at 12:33, David Townsend wrote:
> Just read your old post. I'm not quite sure whether I've read this correctly.  Is the
search worker thread also doing deletes from the index 
> 
> "a test script is going that is hitting the search
> part of our application (I think the script also updates and deletes
> Documents, but I am not sure."
> 
> Deleting also locks the index, so maybe the indexwriter is waiting for the search thread
to release the lock.

I checked with my co-worker, and his script is doing a search, modifying
assets (which deletes and re-inserts) and then deleting them. This is
going on while new Documents are being added to the index from another
thread. (Due to some weirdness in our application, it is also trying to
delete Documents that don't exist before inserting them -- should be
harmless, though.)

I control access to the index with a lock object during all write
accesses to the index, including deletes.

You can see the code here:
http://nagoya.apache.org/eyebrowse/GetAttachment?listName=lucene-user@jakarta.apache.org&msgId=2068605&attachId=1

Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


